<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://flunggg.cn").hostname,root:"/",scheme:"Gemini",version:"7.5.0",exturl:!1,sidebar:{position:"left",display:"post",offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!0,color:"#836FFF",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},sidebarPadding:40}</script><meta name="description" content="做自己喜欢的事"><meta name="keywords" content="flunggg"><meta property="og:type" content="website"><meta property="og:title" content="flunggg"><meta property="og:url" content="https:&#x2F;&#x2F;flunggg.cn&#x2F;index.html"><meta property="og:site_name" content="flunggg"><meta property="og:description" content="做自己喜欢的事"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://flunggg.cn/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1,isPage:!1,isArchive:!1}</script><title> flunggg - flunggg做自己喜欢的事</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="flunggg" type="application/atom+xml"></head><body itemscope itemtype="https://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="https://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">flunggg</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">做自己喜欢的事</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-top"><a href="/top/" rel="section"><i class="fa fa-fw fa-signal"></i> 阅读排行</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档<span class="badge">5</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类<span class="badge">1</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签<span class="badge">1</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/magicflung" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="https://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://flunggg.cn/archives/6bbc4ccb.html"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="flunggg"><meta itemprop="description" content="做自己喜欢的事"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="flunggg"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/archives/6bbc4ccb.html" class="post-title-link" itemprop="url">hexo4-NexT7搭建博客(四)</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-12-24 16:23:44" itemprop="dateCreated datePublished" datetime="2019-12-24T16:23:44+08:00">2019-12-24</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-12-26 18:48:52" itemprop="dateModified" datetime="2019-12-26T18:48:52+08:00">2019-12-26</time></span><br><span id="/archives/6bbc4ccb.html" class="post-meta-item leancloud_visitors" data-flag-title="hexo4-NexT7搭建博客(四)" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/archives/6bbc4ccb.html#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/archives/6bbc4ccb.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2.3k</span></span></div></header><div class="post-body" itemprop="articleBody"><p>title: hexo4-NexT7搭建博客(四)<br>copyright: true<br>tags: hexo<br>categories: hexo<br>description: 接上面一篇，搭建博客系列(四)美化主题<br>abbrlink: 6bbc4ccb<br>date: 2019-12-24 16:23:44<br>top:</p><h2 id="23-添加评论"><a href="#23-添加评论" class="headerlink" title="23. 添加评论"></a>23. 添加评论</h2><p>评论系统有很多种，只能选一种。</p><h3 id="23-1-Valine评论"><a href="#23-1-Valine评论" class="headerlink" title="23.1 Valine评论"></a>23.1 Valine评论</h3><p>我自己喜欢用不登录评论，也就是偶尔有人要说一下，但是发现还得登录。这个评论系统就是Valine，下面是教程：</p><h4 id="1-注册LeanCloud"><a href="#1-注册LeanCloud" class="headerlink" title="1. 注册LeanCloud"></a>1. 注册LeanCloud</h4><p>点击<a href="https://www.leancloud.cn/" target="_blank" rel="external nofollow noopener noreferrer">LeanCloud</a>，去注册一个账号，点右上角的控制台就会跳到注册。这里有分为国内和国际版，国内的在2019-10-1之后需要自定义已备案域名才能继续提供服务了，觉得麻烦的同学可以移步去国际版<a href="https://leancloud.app/" target="_blank" rel="external nofollow noopener noreferrer">LeanCloud国际版</a>。</p><h4 id="2-创建应用"><a href="#2-创建应用" class="headerlink" title="2. 创建应用"></a>2. 创建应用</h4><p>注册好之后，进行实名验证、邮箱验证等等。</p><p>点击创建应用，输入名称，然后直接创建。</p><p><img src="/images/loading.png" data-original="http://flunggg.oss-cn-shenzhen.aliyuncs.com/photos/hexo4-NexT7%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2(%E5%9B%9B)/2.png?OSSAccessKeyId=LTAI4FcpqDfvxQbbwUA3ZZyH&Expires=1577360313&Signature=XUpG79zqfVbRIU4Ax0dVVQeup8s%3D" alt></p><h4 id="3-设置Web安全域名，填入自己的域名"><a href="#3-设置Web安全域名，填入自己的域名" class="headerlink" title="3.  设置Web安全域名，填入自己的域名"></a>3. 设置Web安全域名，填入自己的域名</h4><p>目的是：为了数据安全。</p><p>打开应用，点击 设置 -&gt; 安全中心。看下面，把能访问到你网站的URL全写进去。</p><p><img src="/images/loading.png" data-original="http://flunggg.oss-cn-shenzhen.aliyuncs.com/photos/hexo4-NexT7%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2(%E5%9B%9B)/3.png?OSSAccessKeyId=LTAI4FcpqDfvxQbbwUA3ZZyH&Expires=1577360912&Signature=OYKWpbxvFc%2FXL3R11wmM0ZodNGs%3D" alt></p><h4 id="4-获取APP-ID-和-APP-Key"><a href="#4-获取APP-ID-和-APP-Key" class="headerlink" title="4. 获取APP ID 和 APP Key"></a>4. 获取APP ID 和 APP Key</h4><p>如下打开：</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/400.png" alt></p><p>然后在主题目录的_config.yml 文件查询 valine，然后把上面的两个复制进去</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"># Valine</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"># For more information: https:&#x2F;&#x2F;valine.js.org, https:&#x2F;&#x2F;github.com&#x2F;xCss&#x2F;Valine</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">valine:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">  enable: true # 开启</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">  appid:  # 添加你的appid</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">  appkey: # 添加你的appkey</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">  notify: false # Mail notifier</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">  verify: false # Verification code</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">  placeholder: Just go go # Comment box placeholder</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">  avatar: monsterid # Gravatar style</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">  guest_info: nick,mail,link # Custom comment header</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">  pageSize: 10 # Pagination size</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">  language: # Language, available values: en, zh-cn</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">  visitor: true # Article reading statistic</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">  comment_count: true # If false, comment count will only be displayed in post page, not in home page</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">  recordIP: false # Whether to record the commenter IP</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">  serverURLs: # When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">  #post_meta_order: 0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">  avatar_cdn: https:&#x2F;&#x2F;www.gravatar.com&#x2F;avatar&#x2F;</span></pre></td></tr></table></figure><p>效果图是这样的：</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/5.png" alt></p><p>不过上面的 网址(http://) 我觉得没什么用，就把它去掉了，打开themes\next\layout_third-party\comments中的valine.swig文件，删掉第三个，我的已经删了：</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/6.png" alt></p><p>也可以选择Gitalk评论系统，这个我就不说了。要的自己百度。</p><h2 id="24-Vline邮箱评论通知"><a href="#24-Vline邮箱评论通知" class="headerlink" title="24. Vline邮箱评论通知"></a>24. Vline邮箱评论通知</h2><p>每当有人在博文下面评论我们的博文，我们就可以使用这个插件通过邮箱知道。</p><p>下面这款插件是新款，有几个优点：</p><ul><li>完善的邮件通知，自定义 SMTP 发件频率和内容不再受限</li><li>基于 Akismet 的垃圾评论自动标注和过滤</li><li>评论管理，避免直接操作数据库</li></ul><p>效果：</p> <img src="/images/loading.png" data-original="/archives/6bbc4ccb/7.png" style="zoom:50%"><p>1.我们还是要借助<a href="https://leancloud.cn/dashboard/login.html#/signup" target="_blank" rel="external nofollow noopener noreferrer">Leancloud</a>，打开刚刚我们创建的应用，如图：修改右边的边框内容。这是配置恢复模板。</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/10.png" alt></p><blockquote><p><strong>注</strong>：请注意修改链接为你的<code>博客</code>或者<code>网站首页</code>。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hi, &#123;&#123;username&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">你在 &#123;&#123;appname&#125;&#125; 的评论收到了新的回复，请点击查看：</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"你的网址首页链接"</span> <span class="attr">style</span>=<span class="string">"display: inline-block; padding: 10px 20px; border-radius: 4px; background-color: #3090e4; color: #fff; text-decoration: none;"</span>&gt;</span>马上查看<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></pre></td></tr></table></figure><p>2.还是在Leancloud中，打开 云引擎 -》设置，把下面代码复制进去：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;github.com&#x2F;DesertsP&#x2F;Valine-Admin.git</span></pre></td></tr></table></figure><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/12.png" alt></p><p>然后还是在这，点击 部署，如图：</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/14.png" alt></p><p>上面的图我用别人的，因为我自己点开就是下面的图：</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/13.png" alt></p><p>然后等待部署完，比较久。</p><p>3.然后还是回到 云引擎 -》 设置 中，如图：找到 自定义环境变量</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/15.png" alt></p><p>需要配置信息：</p><table><thead><tr><th>变量名</th><th>实例</th><th>说明</th></tr></thead><tbody><tr><td>SITE_NAME</td><td>flunggg</td><td>【必填】网站名称</td></tr><tr><td>SITE_URL</td><td><a href="https://flunggg.cn/">https://flunggg.cn/</a></td><td>网站地址</td></tr><tr><td>SMTP_HOST</td><td>smtp.qq.com</td><td>QQ邮箱为这个，其他的自己查</td></tr><tr><td>SMTP_PORT</td><td>465</td><td>Https的邮件端口</td></tr><tr><td>SMTP_USER</td><td><a href="mailto:xxxxx@qq.com" target="_blank" rel="external nofollow noopener noreferrer">xxxxx@qq.com</a></td><td>这里填写QQ邮箱，然后有人评论就会发送到我们这个邮箱里</td></tr><tr><td>SMTP_PASS</td><td></td><td>这里添加邮箱申请的SMTP密码</td></tr><tr><td>SENDER_NAME</td><td>xxx博客–评论提醒</td><td>发送邮件的昵称</td></tr><tr><td>SENDER_EMAIL</td><td></td><td>发送人邮箱，同上面的QQ邮箱一致就行</td></tr><tr><td>ADMIN_URL</td><td></td><td>管理评论后台，这个待会说</td></tr></tbody></table><p>4.如何申请SMTP，直接看图，我用的是qq邮箱，你要用别的得去查。开启后把STMP密码复制到这。</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/20.png" alt></p><p>5.设置二级域名后你可以访问评论管理后台。还是在这里的下面找到 Web主机域名</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/16.png" alt></p><p>现在好像已经是默认给你一个，不能改的，然后把这个域名复制到上面环境变量的ADMIN_URL。</p><p>我们还需要密码，用户名，需要在这里设置，只需要填写 email、password、username，这三个字段即可，使用 username 或 email 登陆即可。</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/17.png" alt></p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/18.png" alt></p><p>然后重启下实例</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/19.png" alt></p><p>最后访问域名，输入我们刚刚的username或者email，登录。就可以管理我们的评论区啦。</p><p>LeanCloud 休眠策略</p><p>免费版的 LeanCloud 容器，是有强制性休眠策略的，不能 24 小时运行：</p><ul><li>每天必须休眠 6 个小时</li><li>30 分钟内没有外部请求，则休眠。</li><li>休眠后如果有新的外部请求实例则马上启动（但激活时发送邮件会失败）。</li></ul><p>分析了一下上方的策略，如果不想付费的话，最佳使用方案就设置定时器，每天 7 - 23 点每 20 分钟访问一次，这样可以保持每天的绝大多数时间邮件服务是正常的。</p><h2 id="25-Valine-头像设置"><a href="#25-Valine-头像设置" class="headerlink" title="25. Valine 头像设置"></a>25. Valine 头像设置</h2><p>我们可以修改评论的头像，路人的头像有下面几种，默认为第一种</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/21.png" alt></p><p>在主题目录的_config.yml文件查找：valine 中，找到avatar，然后就可以修改上面的图标</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"># Valine</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"># For more information: https:&#x2F;&#x2F;valine.js.org, https:&#x2F;&#x2F;github.com&#x2F;xCss&#x2F;Valine</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">valine:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">  ...</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">  avatar: monsterid # Gravatar style</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">  ...</span></pre></td></tr></table></figure><blockquote><p>如果你修改了头像后发现没有更新，请不要慌张，因为<code>gravatar.cat.net</code> 有七天的缓存期，安静的等待吧</p></blockquote><p>然后还可以设置自己的自定义头像，登录 <a href="https://cn.gravatar.com/" target="_blank" rel="external nofollow noopener noreferrer">gravatar</a>，注册账号并设置头像，然后在valine评论时，输入我们刚刚注册的邮箱，会显示出我们自定义的头像。我的设置如下：</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/22.png" alt></p><h2 id="26-添加文章阅读次数"><a href="#26-添加文章阅读次数" class="headerlink" title="26. 添加文章阅读次数"></a>26. 添加文章阅读次数</h2><p>这个还是得借助<a href="https://leancloud.cn/dashboard/login.html#/signup" target="_blank" rel="external nofollow noopener noreferrer">Leancloud</a> 。</p><p>在主题目录的_config.yml 查询 leancloud_visitors</p><h2 id="27-Url-持久化"><a href="#27-Url-持久化" class="headerlink" title="27. Url 持久化"></a>27. Url 持久化</h2><p>我们可以发现 hexo 默认生成的文章地址路径是 <code>【网站名称／年／月／日／文章名称】</code>。</p><p>这种链接对搜索爬虫是很不友好的，它的 url 结构超过了三层，太深了。</p><p>下面我推荐安装 <code>hexo-abbrlink</code> 插件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span></pre></td></tr></table></figure><p>然后在站点目录下，查询 permalink</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"># URL</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">## If your site is put in a subdirectory, set url as &#39;http:&#x2F;&#x2F;yoursite.com&#x2F;child&#39; and root as &#39;&#x2F;child&#x2F;&#39;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">url: https:&#x2F;&#x2F;flunggg.cn&#x2F;  # 这里我填写我自己的域名，没有域名的先别动</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">root: &#x2F;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">permalink: archives&#x2F;:abbrlink.html # 该这个</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">abbrlink:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">  alg: crc32  # 算法：crc16(default) and crc32</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">  rep: hex    # 进制：dec(default) and hex</span></pre></td></tr></table></figure><p>效果：</p><p><img src="/images/loading.png" data-original="/archives/6bbc4ccb/8.png" alt></p><h2 id="28-nofollow-标签的使用"><a href="#28-nofollow-标签的使用" class="headerlink" title="28. nofollow 标签的使用"></a>28. nofollow 标签的使用</h2><p>减少出站链接能够有效防止权重分散。简单的说就是，如果A网页上有一个链接指向B网页，但A网页给这个链接加上了 rel=”nofollow” 标注，则搜索引擎不把A网页计算入B网页的<a href="https://baike.baidu.com/item/反向链接/7535075" target="_blank" rel="external nofollow noopener noreferrer">反向链接</a>。<a href="https://baike.baidu.com/item/搜索引擎/104812" target="_blank" rel="external nofollow noopener noreferrer">搜索引擎</a>看到这个标签就可能减少或完全取消链接的投票<a href="https://baike.baidu.com/item/权重/10245966" target="_blank" rel="external nofollow noopener noreferrer">权重</a>。（百度百科）</p><p>安装插件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">npm install hexo-autonofollow --save</span></pre></td></tr></table></figure><p>然后在站点目录下的_config.yml添加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"># 外部链接优化</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">nofollow:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    enable: true</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    exclude:     # 例外的链接，可将友情链接放置此处</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    - &#39;yousite&#39;</span></pre></td></tr></table></figure><p>这样，例外的链接将不会被加上 nofollow 属性。</p><p>参考：</p><p><a href="https://tding.top/archives/9a232bbe.html" target="_blank" rel="external nofollow noopener noreferrer">1</a></p><p><a href="https://cloud.tencent.com/developer/article/1142490" target="_blank" rel="external nofollow noopener noreferrer">评论邮箱参考</a></p><p><a href="https://valine.js.org/avatar.html" target="_blank" rel="external nofollow noopener noreferrer">2</a></p></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="https://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://flunggg.cn/archives/53889e4c.html"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="flunggg"><meta itemprop="description" content="做自己喜欢的事"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="flunggg"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/archives/53889e4c.html" class="post-title-link" itemprop="url">hexo4-NexT7搭建博客(三)</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-12-23 22:27:29" itemprop="dateCreated datePublished" datetime="2019-12-23T22:27:29+08:00">2019-12-23</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-12-26 12:59:58" itemprop="dateModified" datetime="2019-12-26T12:59:58+08:00">2019-12-26</time></span><br><span id="/archives/53889e4c.html" class="post-meta-item leancloud_visitors" data-flag-title="hexo4-NexT7搭建博客(三)" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/archives/53889e4c.html#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/archives/53889e4c.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>3.8k</span></span></div></header><div class="post-body" itemprop="articleBody"> 搭建博客系列(三)美化主题<div class="post-button"> <a class="btn" href="/archives/53889e4c.html">阅读全文 &raquo;</a></div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="https://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://flunggg.cn/archives/66b7033a.html"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="flunggg"><meta itemprop="description" content="做自己喜欢的事"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="flunggg"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/archives/66b7033a.html" class="post-title-link" itemprop="url">hexo4 - NexT7搭建博客(二)</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-12-22 21:13:44" itemprop="dateCreated datePublished" datetime="2019-12-22T21:13:44+08:00">2019-12-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-12-26 13:01:05" itemprop="dateModified" datetime="2019-12-26T13:01:05+08:00">2019-12-26</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a></span></span><br><span id="/archives/66b7033a.html" class="post-meta-item leancloud_visitors" data-flag-title="hexo4 - NexT7搭建博客(二)" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/archives/66b7033a.html#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/archives/66b7033a.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>1.1k</span></span></div></header><div class="post-body" itemprop="articleBody"> 搭建博客系列(二)<div class="post-button"> <a class="btn" href="/archives/66b7033a.html">阅读全文 &raquo;</a></div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="https://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://flunggg.cn/archives/f1c28309.html"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="flunggg"><meta itemprop="description" content="做自己喜欢的事"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="flunggg"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/archives/f1c28309.html" class="post-title-link" itemprop="url">hexo4 - nexT7搭建博客(一)</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-12-17 23:28:39" itemprop="dateCreated datePublished" datetime="2019-12-17T23:28:39+08:00">2019-12-17</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-12-26 13:00:47" itemprop="dateModified" datetime="2019-12-26T13:00:47+08:00">2019-12-26</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a></span></span><br><span id="/archives/f1c28309.html" class="post-meta-item leancloud_visitors" data-flag-title="hexo4 - nexT7搭建博客(一)" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/archives/f1c28309.html#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/archives/f1c28309.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>1.7k</span></span></div></header><div class="post-body" itemprop="articleBody"> 搭建博客系列(一)<div class="post-button"> <a class="btn" href="/archives/f1c28309.html">阅读全文 &raquo;</a></div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="https://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://flunggg.cn/archives/7d96358d.html"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="flunggg"><meta itemprop="description" content="做自己喜欢的事"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="flunggg"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/archives/7d96358d.html" class="post-title-link" itemprop="url">Hello Myblog</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-12-01 21:46:35" itemprop="dateCreated datePublished" datetime="2019-12-01T21:46:35+08:00">2019-12-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-12-23 21:34:53" itemprop="dateModified" datetime="2019-12-23T21:34:53+08:00">2019-12-23</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a></span></span><br><span id="/archives/7d96358d.html" class="post-meta-item leancloud_visitors" data-flag-title="Hello Myblog" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/archives/7d96358d.html#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/archives/7d96358d.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>496</span></span></div></header><div class="post-body" itemprop="articleBody"> 一些配置<div class="post-button"> <a class="btn" href="/archives/7d96358d.html">阅读全文 &raquo;</a></div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div></div></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="https://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="flunggg" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">flunggg</p><div class="site-description" itemprop="description">做自己喜欢的事</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">5</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">1</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">1</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/magicflung" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;magicflung" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i> RSS</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2019</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">flunggg</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">9k</span></div><div id="days"></div><script language="javascript">function show_date_time(){window.setTimeout("show_date_time()",1e3),BirthDay=new Date("11/29/2019 20:00:00"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),e_hrsold=24*(e_daysold-daysold),hrsold=setzero(Math.floor(e_hrsold)),e_minsold=60*(e_hrsold-hrsold),minsold=setzero(Math.floor(60*(e_hrsold-hrsold))),seconds=setzero(Math.floor(60*(e_minsold-minsold))),document.getElementById("days").innerHTML="已运行"+daysold+"天"+hrsold+"时"+minsold+"分"+seconds+"秒"}function setzero(e){return e<10&&(e="0"+e),e}show_date_time()</script> <span id="busuanzi_container_site_pv">本站总访问量<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>次</span><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/local-search.js"></script><script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'ogeebUOA3cE6iHMOmWC9IdvV-gzGzoHsz',
    appKey: 'U1fUosFMtzuRYccYpt5bEDhv',
    placeholder: "Just go go",
    avatar: 'monsterid',
    meta: guest,
    pageSize: '10' || 10,
	avatar_cdn:'https://www.gravatar.com/avatar/',
    visitor: true,
    lang: '' || 'zh-cn',
    path: location.pathname,
    recordIP: false,
    serverURLs: ''
  });
}, window.Valine);
</script><script>!function(e){var l=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var c=0;c<l.length;c++)0<=(t=l[c].getBoundingClientRect()).top&&0<=t.left&&t.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(t){var n,e,i,o,r=l[c];n=r,e=function(){l=l.filter(function(t){return r!==t})},i=new Image,o=n.getAttribute("data-original"),i.onload=function(){n.src=o,e()},i.src=o}();var t}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this)</script></body><script type="text/javascript" src="/js/src/clicklove.js"></script><script type="text/javascript" src="/js/src/FunnyTitle.js"></script><canvas id="canvas" width="1440" height="900"></canvas><script type="text/javascript" src="/js/src/DigitalRain.js"></script></html>