<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://flunggg.cn").hostname,root:"/",scheme:"Gemini",version:"7.5.0",exturl:!1,sidebar:{position:"left",display:"post",offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!0,color:"#836FFF",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!1,algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},sidebarPadding:40}</script><meta name="description" content="搭建博客系列(六)优化博客"><meta name="keywords" content="hexo"><meta property="og:type" content="article"><meta property="og:title" content="hexo4-NexT7搭建博客(六)"><meta property="og:url" content="https:&#x2F;&#x2F;flunggg.cn&#x2F;archives&#x2F;f41853c4.html"><meta property="og:site_name" content="flunggg"><meta property="og:description" content="搭建博客系列(六)优化博客"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122816&#x2F;20191228165411-448783.png"><meta property="og:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122816&#x2F;20191228165615-800176.png"><meta property="og:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122816&#x2F;20191228165621-963532.png"><meta property="og:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122816&#x2F;20191228165625-682867.png"><meta property="og:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122816&#x2F;20191228165756-585323.png"><meta property="og:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122817&#x2F;20191228170240-899062.png"><meta property="og:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122817&#x2F;20191228170757-391535.png"><meta property="og:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122817&#x2F;20191228171050-107982.png"><meta property="og:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122819&#x2F;20191228193136-962690.png"><meta property="og:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122819&#x2F;20191228195944-185026.png"><meta property="og:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122820&#x2F;20191228201653-975400.png"><meta property="og:updated_time" content="2019-12-28T18:11:05.508Z"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http:&#x2F;&#x2F;flunggg.oss-cn-shenzhen.aliyuncs.com&#x2F;hexoImg&#x2F;2019122816&#x2F;20191228165411-448783.png"><link rel="canonical" href="https://flunggg.cn/archives/f41853c4.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,isPage:!1,isArchive:!1}</script><title>hexo4-NexT7搭建博客(六) | flunggg</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="flunggg" type="application/atom+xml"></head><body itemscope itemtype="https://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="https://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">flunggg</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">做自己喜欢的事</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-top"><a href="/top/" rel="section"><i class="fa fa-fw fa-signal"></i> 阅读排行</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档<span class="badge">16</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类<span class="badge">4</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签<span class="badge">4</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-message"><a href="/message/" rel="section"><i class="fa fa-fw fa-bell"></i> 留言板</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/magicflung" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="https://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://flunggg.cn/archives/f41853c4.html"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="flunggg"><meta itemprop="description" content="做自己喜欢的事"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="flunggg"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> hexo4-NexT7搭建博客(六)</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-12-28 16:39:23" itemprop="dateCreated datePublished" datetime="2019-12-28T16:39:23+08:00">2019-12-28</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-12-29 02:11:05" itemprop="dateModified" datetime="2019-12-29T02:11:05+08:00">2019-12-29</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a></span></span><br><span id="/archives/f41853c4.html" class="post-meta-item leancloud_visitors" data-flag-title="hexo4-NexT7搭建博客(六)" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/archives/f41853c4.html#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/archives/f41853c4.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2.1k</span></span><div class="post-description">搭建博客系列(六)优化博客</div></div></header><div class="post-body" itemprop="articleBody"><h2 id="1-域名绑定"><a href="#1-域名绑定" class="headerlink" title="1. 域名绑定"></a>1. 域名绑定</h2><h3 id="1-1-GitHub仓库的域名绑定"><a href="#1-1-GitHub仓库的域名绑定" class="headerlink" title="1.1 GitHub仓库的域名绑定"></a>1.1 GitHub仓库的域名绑定</h3><ul><li>如果一直打算把博客部署在GitHub上，默认就是部署在这里，那么我们来绑定一下域名。</li></ul><p>首先先去买个域名，<a href="https://wanwang.aliyun.com/" target="_blank" rel="external nofollow noopener noreferrer">阿里云的万网</a>（我是在这个搞的），<a href="https://dnspod.cloud.tencent.com/" target="_blank" rel="external nofollow noopener noreferrer">腾讯云</a>、<a href="https://cloud.baidu.com/product/bcd.html" target="_blank" rel="external nofollow noopener noreferrer">百度云</a>等都可以，这我在前面很早就有说。</p><p>打开你部署在github的博客仓库，然后点击Settings，看到Repository name，复制下面那个。</p><p><img alt="1" data-src="http://flunggg.oss-cn-shenzhen.aliyuncs.com/hexoImg/2019122816/20191228165411-448783.png"></p><p>在阿里云点开你的域名解析：我配置的是@，也就是<a href="http://www.xxx.cn和xxx.cn都可以访问，你可以自己按自己的方式。" target="_blank" rel="external nofollow noopener noreferrer">www.xxx.cn和xxx.cn都可以访问，你可以自己按自己的方式。</a></p><p><img alt="2" data-src="http://flunggg.oss-cn-shenzhen.aliyuncs.com/hexoImg/2019122816/20191228165615-800176.png"></p><p><img alt data-src="http://flunggg.oss-cn-shenzhen.aliyuncs.com/hexoImg/2019122816/20191228165621-963532.png"></p><p>然后点击左边那个蓝色按钮，添加记录。</p><p><img alt="3" data-src="http://flunggg.oss-cn-shenzhen.aliyuncs.com/hexoImg/2019122816/20191228165625-682867.png"></p><p>然后再回到刚刚的github你博客仓库的setting中，往下拉。</p><p><img alt="4" data-src="http://flunggg.oss-cn-shenzhen.aliyuncs.com/hexoImg/2019122816/20191228165756-585323.png"></p><p>最后，在自己本地的站点目录的source文件中，创建一个CNAME文件，然后在里面填上我们的域名。因为刚开始在github那边填上我们的域名，就会在仓库生成一个CNAME文件，而我们本地博客没有，每次上传时都会把它删了，所以得在本地创建一个这样的文件。</p><p><img alt="5" data-src="http://flunggg.oss-cn-shenzhen.aliyuncs.com/hexoImg/2019122817/20191228170240-899062.png"></p><p>访问试试成功了没有。</p><h3 id="1-2-阿里云的域名绑定"><a href="#1-2-阿里云的域名绑定" class="headerlink" title="1.2 阿里云的域名绑定"></a>1.2 阿里云的域名绑定</h3><p>这个最简单了，提前是自己要有阿里云的服务器或者别的服务器。然后去获取服务器的公网IP地址。比如：我的阿里云服务器的公网。</p><p><img alt="6" data-src="http://flunggg.oss-cn-shenzhen.aliyuncs.com/hexoImg/2019122817/20191228170757-391535.png"></p><p>然后回到刚刚域名解析那边，如图：</p><p><img alt="7" data-src="http://flunggg.oss-cn-shenzhen.aliyuncs.com/hexoImg/2019122817/20191228171050-107982.png"></p><p>如果服务器没有装nginx或者tomcat的话，访问不到什么，所以看下一步。</p><h2 id="2-将博客部署到阿里云服务器"><a href="#2-将博客部署到阿里云服务器" class="headerlink" title="2. 将博客部署到阿里云服务器"></a>2. 将博客部署到阿里云服务器</h2><p>这一步我走了很多坑。有时候是githooks不起作用，有时候是nginx问题。</p><h3 id="2-1-本地电脑连接阿里云"><a href="#2-1-本地电脑连接阿里云" class="headerlink" title="2.1 本地电脑连接阿里云"></a>2.1 本地电脑连接阿里云</h3><p><a href="https://blog.csdn.net/weixin_41800884/article/details/103148518" target="_blank" rel="external nofollow noopener noreferrer">阿里云入门</a></p><p><a href="https://blog.csdn.net/weixin_41800884/article/details/103148850" target="_blank" rel="external nofollow noopener noreferrer">阿里云本地SSH连接</a></p><p>这里额外补充，可以下载一个<a href="https://winscp.net/eng/docs/lang:chs" target="_blank" rel="external nofollow noopener noreferrer">WinSCP</a>的可视连接程序。</p><h3 id="2-2-安装nginx"><a href="#2-2-安装nginx" class="headerlink" title="2.2 安装nginx"></a>2.2 安装nginx</h3><p>最好跟我安装一样版本的nginx。看下面的博文，也有某些nginx出错的解决方法。</p><p><a href="https://blog.csdn.net/weixin_41800884/article/details/103545128" target="_blank" rel="external nofollow noopener noreferrer">安装nginx</a></p><p>然后访问公网ip看看有没有出现什么，有出现nginx的首页就说明成功。</p><h3 id="2-3-博客部署到阿里云服务器"><a href="#2-3-博客部署到阿里云服务器" class="headerlink" title="2.3 博客部署到阿里云服务器"></a>2.3 博客部署到阿里云服务器</h3><h4 id="2-3-1-原理"><a href="#2-3-1-原理" class="headerlink" title="2.3.1 原理"></a>2.3.1 原理</h4><p>在本地编辑文本，然后使用Git远程部署到VPS的Git仓库。<code>hexo d</code>命令实际上只deploy了本地的public文件夹，Git Hooks实际上就是当Git仓库收到最新的push时，将Git仓库接受到的内容复制到VPS上的网站目录内。相当于完成了手动将public文件夹复制到VPS的网站根目录里。</p><p>下面这张是用别人的图，该原理就是这样：<a href="https://segmentfault.com/a/1190000016106584" target="_blank" rel="external nofollow noopener noreferrer">原地址</a></p><p><img alt="8" data-src="http://flunggg.oss-cn-shenzhen.aliyuncs.com/hexoImg/2019122819/20191228193136-962690.png"></p><h4 id="2-3-2-安装配置Git"><a href="#2-3-2-安装配置Git" class="headerlink" title="2.3.2 安装配置Git"></a>2.3.2 安装配置Git</h4><p>连接上我们的远程阿里云服务器，然后执行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo yum install git</span></pre></td></tr></table></figure><p>等待下载，查看是否成功：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">git --version</span></pre></td></tr></table></figure><h4 id="2-3-3-创建git用户以及配置免密登录"><a href="#2-3-3-创建git用户以及配置免密登录" class="headerlink" title="2.3.3 创建git用户以及配置免密登录"></a>2.3.3 创建git用户以及配置免密登录</h4><ul><li>创建一个名为git的用户。不是我们github上的那个git用户。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">adduser git</span></pre></td></tr></table></figure><p>假如没有提示输入密码,则</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">passwd git</span></pre></td></tr></table></figure><p>输入自定义密码，以后登录该名为git的用户要用的。</p><ul><li>然后，赋给git用户sudo权限</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">chmod 740 /etc/sudoers</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">vim /etc/sudoers</span></pre></td></tr></table></figure><p>找到如下内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> User privilege specification</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">root    ALL=(ALL:ALL) ALL</span></pre></td></tr></table></figure><p>然后在root下面添加：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> User privilege specification</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">root    ALL=(ALL:ALL) ALL</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">git     ALL=(ALL:ALL) ALL</span></pre></td></tr></table></figure><p>然后按下ESC键，加上 ; 再输入wq保存退出。这应该不用我说了，vim编译器的指令。</p><p>然后修改回文件的权限：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">chmod 440 /etc/sudoers</span></pre></td></tr></table></figure><ul><li>切换到git用户</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">su git						// 切换到git用户</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">cd /home/git				// 切换到git用户目录</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">mkdir -p repo/myblog.git	// 创建git仓库文件夹，以myblog.git为例</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">cd repo/myblog.git			// 切换到repo目录,进入仓库目录</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">git init --bare				// 使用--bare参数初始化为裸仓库，这样创建的仓库不包含工作区</span></pre></td></tr></table></figure><p>创建网站目录shell</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">cd /home/git 				// 切换到git用户目录</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">mkdir -p hexo/blog			// 创建目录，用来存放博客的静态文件</span></pre></td></tr></table></figure><ul><li>配置ssh</li></ul><p>回到我们的本地主机，假设你电脑已经早有配置git密匙，在桌面右键点开Git Bash，输入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">cat ~&#x2F;.ssh&#x2F;id_rsa.pub</span></pre></td></tr></table></figure><p>然后就会出现你的git密匙，复制，然后回到远程阿里云服务器，输入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">cd &#x2F;home&#x2F;git				&#x2F;&#x2F; 切换到git用户目录</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">mkdir .ssh				&#x2F;&#x2F;创建.ssh目录</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">cd .ssh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">sudo vim authorized_keys</span></pre></td></tr></table></figure><p>然后对着vim打开的黑框右键一下，就把刚刚复制的密匙复制过去了，但是注意：有可能在最前面有可能会漏掉几个字符，自己填上去。最后</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">按ESC，然后按分号键; 输入wq</span></pre></td></tr></table></figure><p><img alt="9" data-src="http://flunggg.oss-cn-shenzhen.aliyuncs.com/hexoImg/2019122819/20191228195944-185026.png"></p><ul><li>确认文件夹的权限</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo chown git:git -R &#x2F;home&#x2F;hexo&#x2F;blog</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">sudo chown git:git -R &#x2F;home&#x2F;git&#x2F;myblog.git</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">#然后查看这两个文件夹是不是都属于git:git</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">ll &#x2F;home&#x2F;git&#x2F;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">ll &#x2F;var&#x2F;www&#x2F;</span></pre></td></tr></table></figure><ul><li>然后,到这里,就先验证vps是否能用git用户ssh免密登陆.在本地windows打开git bash,输入命令登陆</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">ssh git@你的服务器的公网ip或者域名</span></pre></td></tr></table></figure><p>首次出现要输入yes。如果有出现要输入密码就成功了，不成功再找我，我在这也走了很多坑。</p><ul><li>然后再配置免密码登录</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">chmod 700 ~/.ssh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">chmod 600 ~/.ssh/authorized_keys</span></pre></td></tr></table></figure><h4 id="2-3-4-配置Nginx"><a href="#2-3-4-配置Nginx" class="headerlink" title="2.3.4 配置Nginx"></a>2.3.4 配置Nginx</h4><p>来到Nginx的目录下的默认配置文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">cd &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">vim default.conf</span></pre></td></tr></table></figure><p>如果出现这个，别理，直接按Enter。</p><p><img alt="10" data-src="http://flunggg.oss-cn-shenzhen.aliyuncs.com/hexoImg/2019122820/20191228201653-975400.png"></p><p>然后就出现下面这个： 改两处就行。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">server &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    listen  80; # 这里就是要在阿里云开放80端口</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    server_name  flunggg.cn www.flunggg.cn;  # 默认是你的公网，如果有域名填写你的域名，因为我域名解析是@，所以有www和无www都可以，全配上去。</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    #charset koi8-r;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    #access_log  &#x2F;var&#x2F;log&#x2F;nginx&#x2F;host.access.log  main;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    return 301 https:&#x2F;&#x2F;$server_name$request_uri; # 以后转https用的</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    location &#x2F; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">        root   &#x2F;home&#x2F;git&#x2F;hexo&#x2F;blog&#x2F;; # 改这里</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">        index  index.html index.htm;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    error_page  404              &#x2F;404.html;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    # redirect server error pages to the static page &#x2F;50x.html</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    #</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">    error_page   500 502 503 504  &#x2F;50x.html;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">    location &#x3D; &#x2F;50x.html &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">        root   &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">    #</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    #location ~ \.php$ &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">    #    proxy_pass   http:&#x2F;&#x2F;127.0.0.1;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">    #&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">    #</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">    #location ~ \.php$ &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">    #    root           html;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">    #    fastcgi_pass   127.0.0.1:9000;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">    #    fastcgi_index  index.php;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">    #    fastcgi_param  SCRIPT_FILENAME  &#x2F;scripts$fastcgi_script_name;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line">    #    include        fastcgi_params;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">    #&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line">    # deny access to .htaccess files, if Apache&#39;s document root</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line">    # concurs with nginx&#39;s one</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line">    #</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line">    #location ~ &#x2F;\.ht &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">41</span></pre></td><td class="code"><pre><span class="line">    #    deny  all;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">42</span></pre></td><td class="code"><pre><span class="line">    #&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">43</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure><p>然后保存退出。</p><p><strong>这里教一个强制保存退出的，就是在wq加个！。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">按ESC，然后按分号键; 输入wq!</span></pre></td></tr></table></figure><p>这是http的，如果要配置https，加SSL证书看这里，现在都是https的网站我建议配上好。</p><p><a href="https://blog.csdn.net/weixin_41800884/article/details/103545130" target="_blank" rel="external nofollow noopener noreferrer">给博客配置上https</a></p><p>我现在用的是https，也就是有SSL证书，http和https的两个配置文件可以共存，就是需要做http的强制跳转，也就是我上面代码那句。</p><h4 id="2-3-5-配置Git-Hooks"><a href="#2-3-5-配置Git-Hooks" class="headerlink" title="2.3.5 配置Git Hooks"></a>2.3.5 配置Git Hooks</h4><p>简称钩子，我们在本地推送时，即会部署到服务器，也会因为git hooks部署到github存储。</p><p>但是我照着网上的资料配置，没有用。所以我换另一种方式。在下一步。</p><h4 id="2-3-6-本地配置"><a href="#2-3-6-本地配置" class="headerlink" title="2.3.6 本地配置"></a>2.3.6 本地配置</h4><p>最后还需要在站点目录配置文件_config.yml中，找到下面代码：在repo中配置两个，这样就可以推送到两个地方。最后一个type: baidu_url_submitter先别理。主要改的就是repo那三行代码。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"># Deployment</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">## Docs: https:&#x2F;&#x2F;hexo.io&#x2F;docs&#x2F;deployment.html</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">deploy:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">- type: git</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">  repo: </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    github: git@github.com:你的github名&#x2F;你的github名.github.io.git</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    vps: git@你的域名或者服务器公网IP:&#x2F;home&#x2F;git&#x2F;repo&#x2F;myblog.git</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">  branch: master</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">- type: baidu_url_submitter</span></pre></td></tr></table></figure><p>最后就可以用你的域名或者公网ip访问博客了，上面配置的github也是可以访问的，但是只拿它来做个存储。</p><h2 id="3-使用gulp压缩资源"><a href="#3-使用gulp压缩资源" class="headerlink" title="3. 使用gulp压缩资源"></a>3. 使用gulp压缩资源</h2><p>在站点目录右键打开Git Bash，输入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">npm install -d --save gulp gulp-clean gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify</span></pre></td></tr></table></figure><p>等待下载安装，然后在站点目录下创建一个文件：gulpfile.js。然后添上：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//Plugins模块获取</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">'gulp-htmlmin'</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">'gulp-htmlclean'</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//压缩css</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'minify-css'</span>,  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.css'</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">.pipe(minifycss())</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">.pipe(gulp.dest(<span class="string">'./public'</span>));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//压缩html</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'minify-html'</span>,  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.html'</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">.pipe(htmlclean())</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">.pipe(htmlmin(&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">removeComments: <span class="literal">true</span>,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">minifyJS: <span class="literal">true</span>,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">minifyCSS: <span class="literal">true</span>,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">minifyURLs: <span class="literal">true</span>,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">&#125;))</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">.pipe(gulp.dest(<span class="string">'./public'</span>))</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//压缩js 不压缩min.js</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'minify-js'</span>,  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> gulp.src([<span class="string">'./public/**/*.js'</span>, <span class="string">'!./public/**/*.min.js'</span>])</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">.pipe(uglify())</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line">.pipe(gulp.dest(<span class="string">'./public'</span>));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 压缩 public/images 目录内图片(Version&gt;3)</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'minify-images'</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">done</span>) </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line">    gulp.src(<span class="string">'./public/images/**/*.*'</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line">        .pipe(imagemin([</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">41</span></pre></td><td class="code"><pre><span class="line">            imagemin.gifsicle(&#123;<span class="attr">interlaced</span>: <span class="literal">true</span>&#125;),</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">42</span></pre></td><td class="code"><pre><span class="line">            imagemin.jpegtran(&#123;<span class="attr">progressive</span>: <span class="literal">true</span>&#125;),</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">43</span></pre></td><td class="code"><pre><span class="line">            imagemin.optipng(&#123;<span class="attr">optimizationLevel</span>: <span class="number">5</span>&#125;),</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">44</span></pre></td><td class="code"><pre><span class="line">            imagemin.svgo(&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">45</span></pre></td><td class="code"><pre><span class="line">                plugins: [</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">46</span></pre></td><td class="code"><pre><span class="line">                    &#123;<span class="attr">removeViewBox</span>: <span class="literal">true</span>&#125;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">47</span></pre></td><td class="code"><pre><span class="line">                    &#123;<span class="attr">cleanupIDs</span>: <span class="literal">false</span>&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">48</span></pre></td><td class="code"><pre><span class="line">                ]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">49</span></pre></td><td class="code"><pre><span class="line">            &#125;)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">50</span></pre></td><td class="code"><pre><span class="line">        ]))</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">51</span></pre></td><td class="code"><pre><span class="line">        .pipe(gulp.dest(<span class="string">'./public/images'</span>));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">52</span></pre></td><td class="code"><pre><span class="line">    done();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">53</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">54</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开始任务</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">55</span></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'default'</span>, gulp.parallel(<span class="string">'minify-html'</span>, <span class="string">'minify-css'</span>,  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">56</span></pre></td><td class="code"><pre><span class="line">  <span class="comment">// Do something after a, b, and c are finished.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">57</span></pre></td><td class="code"><pre><span class="line">&#125;));</span></pre></td></tr></table></figure><p>然后以后每次推送得使用四条指令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; gulp &amp;&amp; hexo d</span></pre></td></tr></table></figure><h3 id="3-1-一键部署"><a href="#3-1-一键部署" class="headerlink" title="3.1 一键部署"></a>3.1 一键部署</h3><p>在<code>package.json</code>中加入如下<code>script</code>，看清楚，需要一个逗号分隔{}</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">  &quot;push&quot;: &quot;hexo clean &amp;&amp; hexo g &amp;&amp; gulp &amp;&amp; hexo d&quot;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure><p>然后在部署的时候只需要运行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">npm run push</span></pre></td></tr></table></figure><p>参考：</p><p><a href="https://ihaoming.top/archives/c9c37af.html" target="_blank" rel="external nofollow noopener noreferrer">hexo部署到vps</a></p></div><div><div class="my_post_copyright"><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script><script src="/js/sweetalert.min.js"></script><p><span>文章作者:</span><a href="/" title="访问 flunggg 的个人博客">flunggg</a></p><p><span>发布时间:</span>2019年12月28日 - 16:12</p><p><span>原始链接:</span><a href="/archives/f41853c4.html" title="hexo4-NexT7搭建博客(六)">https://flunggg.cn/archives/f41853c4.html</a><span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://flunggg.cn/archives/f41853c4.html" aria-label="复制成功！"></i></span></p><p><span>许可协议:</span> 转载请保留原文链接及作者。</p></div><script>var clipboard=new Clipboard(".fa-clipboard");$(".fa-clipboard").click(function(){clipboard.on("success",function(){swal({title:"",text:"复制成功",icon:"success",showConfirmButton:!0})})})</script></div><div class="reward-container"><div></div> <button disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';"> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="/images/wechatpay.jpg" alt="flunggg 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="/images/alipay.jpg" alt="flunggg 支付宝"><p>支付宝</p></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/hexo/" rel="tag"><i class="fa fa-tag"></i> hexo</a></div><div class="post-nav"><div class="post-nav-item"><a href="/archives/6d171bb6.html" rel="prev" title="hexo4-NexT7搭建博客(五)"><i class="fa fa-chevron-left"></i> hexo4-NexT7搭建博客(五)</a></div><div class="post-nav-item"> <a href="/archives/6b104b4e.html" rel="next" title="hexo4-NexT7搭建博客(七)">hexo4-NexT7搭建博客(七)<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments" id="comments"></div></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-域名绑定"><span class="nav-text">1. 域名绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-GitHub仓库的域名绑定"><span class="nav-text">1.1 GitHub仓库的域名绑定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-阿里云的域名绑定"><span class="nav-text">1.2 阿里云的域名绑定</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-将博客部署到阿里云服务器"><span class="nav-text">2. 将博客部署到阿里云服务器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-本地电脑连接阿里云"><span class="nav-text">2.1 本地电脑连接阿里云</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-安装nginx"><span class="nav-text">2.2 安装nginx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-博客部署到阿里云服务器"><span class="nav-text">2.3 博客部署到阿里云服务器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-1-原理"><span class="nav-text">2.3.1 原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-2-安装配置Git"><span class="nav-text">2.3.2 安装配置Git</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-3-创建git用户以及配置免密登录"><span class="nav-text">2.3.3 创建git用户以及配置免密登录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-4-配置Nginx"><span class="nav-text">2.3.4 配置Nginx</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-5-配置Git-Hooks"><span class="nav-text">2.3.5 配置Git Hooks</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-6-本地配置"><span class="nav-text">2.3.6 本地配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-使用gulp压缩资源"><span class="nav-text">3. 使用gulp压缩资源</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-一键部署"><span class="nav-text">3.1 一键部署</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="https://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="flunggg" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">flunggg</p><div class="site-description" itemprop="description">做自己喜欢的事</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/magicflung" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;magicflung" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://blog.csdn.net/weixin_41800884" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_41800884" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-maxcdn"></i> CSDN</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i> RSS</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">flunggg</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">33k</span></div><div id="days"></div><script language="javascript">function show_date_time(){window.setTimeout("show_date_time()",1e3),BirthDay=new Date("11/29/2019 20:00:00"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),e_hrsold=24*(e_daysold-daysold),hrsold=setzero(Math.floor(e_hrsold)),e_minsold=60*(e_hrsold-hrsold),minsold=setzero(Math.floor(60*(e_hrsold-hrsold))),seconds=setzero(Math.floor(60*(e_minsold-minsold))),document.getElementById("days").innerHTML="已运行"+daysold+"天"+hrsold+"时"+minsold+"分"+seconds+"秒"}function setzero(e){return e<10&&(e="0"+e),e}show_date_time()</script> <span id="busuanzi_container_site_pv">本站总访问量<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>次</span><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="https://ajax.cat.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/local-search.js"></script><script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'ogeebUOA3cE6iHMOmWC9IdvV-gzGzoHsz',
    appKey: 'U1fUosFMtzuRYccYpt5bEDhv',
    placeholder: "Just go go",
    avatar: 'monsterid',
    meta: guest,
    pageSize: '10' || 10,
	avatar_cdn:'https://www.gravatar.com/avatar/',
    visitor: true,
    lang: '' || 'zh-cn',
    path: location.pathname,
    recordIP: false,
    serverURLs: ''
  });
}, window.Valine);
</script></body><script type="text/javascript" src="/js/src/clicklove.js"></script><script type="text/javascript" src="/js/src/FunnyTitle.js"></script><canvas id="canvas" width="1440" height="900"></canvas><script type="text/javascript" src="/js/src/DigitalRain.js"></script></html>