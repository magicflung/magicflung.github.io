<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://flunggg.cn").hostname,root:"/",scheme:"Gemini",version:"7.5.0",exturl:!1,sidebar:{position:"left",display:"post",offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!0,color:"#836FFF",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!1,algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},sidebarPadding:40}</script><meta name="description" content="JavaWeb的一些要点，作为框架前必须学习。。。"><meta property="og:type" content="article"><meta property="og:title" content="JavaWeb总结"><meta property="og:url" content="https://flunggg.cn/archives/f8e04b04.html"><meta property="og:site_name" content="flunggg"><meta property="og:description" content="JavaWeb的一些要点，作为框架前必须学习。。。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715202605996.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715202556332.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715202711280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203037122.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715202849483.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715202940690.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203109769.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715202746944.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203131463.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203206736.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203214362.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203239703.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203328838.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203317412.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203400177.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203427642.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203519542.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203636696.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203702537.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203712130.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203729582.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/2020071520373753.png#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203748705.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203809857.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203822869.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203842184.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203926722.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="og:image" content="https://img-blog.csdnimg.cn/20200715203910285.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><meta property="article:published_time" content="2020-07-15T12:46:32.000Z"><meta property="article:modified_time" content="2020-07-15T12:51:05.089Z"><meta property="article:author" content="flunggg"><meta property="article:tag" content="java session cookie"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img-blog.csdnimg.cn/20200715202605996.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"><link rel="canonical" href="https://flunggg.cn/archives/f8e04b04.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,isPage:!1,isArchive:!1}</script><title>JavaWeb总结 | flunggg</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="flunggg" type="application/atom+xml"></head><body itemscope itemtype="https://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="https://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">flunggg</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">做自己喜欢的事</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-top"><a href="/top/" rel="section"><i class="fa fa-fw fa-signal"></i> 阅读排行</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档<span class="badge">18</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类<span class="badge">6</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签<span class="badge">6</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/magicflung" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="https://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://flunggg.cn/archives/f8e04b04.html"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="flunggg"><meta itemprop="description" content="做自己喜欢的事"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="flunggg"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> JavaWeb总结</h2><div class="post-meta"><br><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-07-15 20:46:32 / 修改时间：20:51:05" itemprop="dateCreated datePublished" datetime="2020-07-15T20:46:32+08:00">2020-07-15</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span></span><br><span id="/archives/f8e04b04.html" class="post-meta-item leancloud_visitors" data-flag-title="JavaWeb总结" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/archives/f8e04b04.html#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/archives/f8e04b04.html" itemprop="commentCount"></span></a></span><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>15k</span></span><div class="post-description">JavaWeb的一些要点，作为框架前必须学习。。。</div></div></header><div class="post-body" itemprop="articleBody"><h2 id="1-JavaWeb-入门"><a href="#1-JavaWeb-入门" class="headerlink" title="1. JavaWeb 入门"></a>1. JavaWeb 入门</h2><p>Web：网页，Web可分为两种：</p><ul><li>静态Web：<ul><li>比如：html，css。</li><li><strong>提供给人看的数据永远都不会变化。</strong> 也就是无法与数据库交互，也无法动态更新。</li><li>可以直接访问，比如：<a href="http://www.baidu.com/index.html。前提是服务器允许你访问该静态Web" target="_blank" rel="external nofollow noopener noreferrer">www.baidu.com/index.html。前提是服务器允许你访问该静态Web</a></li></ul></li><li>动态Web：<ul><li>几乎所有的网站都是动态Web。</li><li><strong>提供给人看的数据会变化</strong>，比如淘宝上面的用户名，电商里面会根据你最近经常浏览的商品再推荐更多类似的商品。也就是会跟数据库交互，动态更新数据。</li><li>使用到的技术（后台技术）：Java，PHP，Servlet/JSP（JSP了解一下就行）</li><li>缺点：动态Web资源如果出现错误，那么得停机维护，重新编写后台程序。</li></ul></li></ul><p>所以，在Java中，开发动态Web资源的技术统称为 JavaWeb。</p><h3 id="1-1-Web应用程序"><a href="#1-1-Web应用程序" class="headerlink" title="1.1 Web应用程序"></a>1.1 Web应用程序</h3><p>Web应用程序：可以提供浏览器访问的程序； 比如：</p><ul><li>html，css等，这些Web资源可以被外部访问，对外界提供服务。</li><li>通过URL，能够访问到的任何一个页面或资源，都存在于这世界某一角落的计算机上。</li></ul><p>一个Web应用由静态Web和动态Web组成，动态Web会嵌套在静态Web中。若想要给外界访问还需要提供一个服务器，让它来统一管理这些资源。</p><h3 id="1-2-Web服务器"><a href="#1-2-Web服务器" class="headerlink" title="1.2 Web服务器"></a>1.2 Web服务器</h3><p>Web服务器跟服务器不一样，服务器就是我们电脑，而Web服务器就是可以处理浏览器等Web客户端的请求并返回相应响应，也可以放置网站文件等。</p><p>看下有趣的历史：</p><ul><li><p>使用ASP来开发Web页面，基本一个页面都有几千行的业务代码，页面极其换乱 ，不易维护。</p></li><li><p>然后就换成PHP，PHP开发速度很快，功能很强大，跨平台，代码很简单 ，但是随着互联网的扩大，流量越来越大，无法承载大访问量的情况 。</p></li><li><p>出现了JSP/Servlet，提供两种架构：B/S：浏览器和服务器 和 C/S: 客户端和服务器。 sun公司主推 B/S架构，使用的是 Java语言，可以承载三高问题带来的影响。</p></li></ul><blockquote><p>三高问题：</p><p>高可用：尽量缩短因日常维护操作（计划）和突发的系统崩溃（非计划）所导致的停机时间。</p><p>高并发：增加服务器内存的大小，更多人同时访问，更多线程。</p><p>高性能：提高CPU速度，优化程序，处理任务快。</p></blockquote><blockquote><p>额外：都2020了，<code>JSP</code>可以了解，不过现在开发基本都不会用。需要注意的是，并不是电脑只安装了<code>jre</code>就可以运行所有Java程序，使用 <code>JSP</code> 部署 Web应用程序，此一看是在运行Java程序，但是应用程序服务器会将 <code>JSP</code> 转换为 <code>Java servlet</code>，这个过程需要使用 <code>JDK</code> 来编译。<code>servlet</code>。</p></blockquote><p>服务器是一种被动的操作，用来处理用户的一些请求和给用户一些响应信息 。</p><p>常见的服务器有：</p><ul><li>IIS（了解）：由微软提供，Windos自带的，如果没有则得自己开启。</li><li>Tomcat：推荐使用！！性能稳定，而且是免费的，还提供源代码，属于轻量级应用服务器（Application Server）。也是Apache，Sun等共同开发的一个项目。<strong>Tomcat在JVM上运行，处理的是JSP页面和Servlet</strong>。</li><li>Nginx：可以跟Tomcat配合，属于HTTP Server。功能：<a href="https://www.zhihu.com/question/32212996" target="_blank" rel="external nofollow noopener noreferrer">参考知乎：作者 David</a><ul><li><strong>反向代理</strong>：<strong>代表资源服务器来回应客户端的请求</strong>，就跟被告和被告律师一样，你也可以自己辩解（资源服务器），也可以让被告律师辩解（Nginx），不过谁跟专业点呢（参考下面HTTP Server的解释）？</li><li><strong>动静资源分离</strong>：通过反向代理分发请求，使得所有动态资源的请求都交给Tomcat，而静态资源的请求（例如图片、视频、CSS、JavaScript文件等）则直接由Nginx返回到浏览器（Nginx并没有处理，只是分发），这样能大大减轻Tomcat的压力。</li><li><strong>负载均衡</strong>：当业务压力增大时，可能一个Tomcat的实例不足以处理，那么这时可以启动多个Tomcat实例进行水平扩展，而Nginx的负载均衡功能可以把请求通过算法分发到各个不同的实例进行处理。</li></ul></li></ul><blockquote><p>正向代理：代表客户端去访问服务器。</p></blockquote><ul><li>Apache：也是HTTP Server，只支持静态页面，不过可以通过插件支持PHP，还可以与Tomcat连通。Nginx是Apache目前最大的竞争对手，Apache是同步多进程模型，一个连接对应一个进程，而Nginx是异步的，多个连接（万级别）可以对应一个进程。<a href="https://www.php.cn/faq/422192.html" target="_blank" rel="external nofollow noopener noreferrer">具体情况</a></li><li>…..</li><li>…..</li></ul><blockquote><p>HTTP Server 关心的是 HTTP 协议层面的传输和访问控制，虽然Application Server也有，但不是很强大。</p></blockquote><h3 id="1-3-Tomcat"><a href="#1-3-Tomcat" class="headerlink" title="1.3 Tomcat"></a>1.3 Tomcat</h3><p>安装和配置网上一大推。。。虽然下面的东西可以在IDE中配置更方便，但是如果在Linux中安装Tomcat并部署一个网站的话，还是需要认识目录结构和一些相关东西。虽然SpringBoot也有内置Tomcat，但是内置的Tomcat有漏洞的话，SpringBoot得升级，可能代码要大改动，所以可以移除使用我们自己的Tomcat。</p><p>看下Tomcat的目录结构：</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715202605996.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>启动和关闭Tomcat，在bin目录下：</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715202556332.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>配置：</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715202711280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>可以配置启动的端口号</p><ul><li>tomcat的默认端口号为：8080，可以修改下面代码中的prot</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connector port=<span class="string">"8080"</span> protocol=<span class="string">"HTTP/1.1"</span></span><br><span class="line">           connectionTimeout=<span class="string">"20000"</span></span><br><span class="line">           redirectPort=<span class="string">"8443"</span> URIEncoding=<span class="string">"UTF-8"</span>/&gt;</span><br></pre></td></tr></table></figure><ul><li>mysql默认端口号：3306；http默认端口号：80；https默认端口号：443</li></ul><p>可以配置主机的名称：</p><ul><li>默认的主机名为：localhost-&gt;127.0.0.1，修改后还得去电脑中的hosts中修改127.0.0.1的映射。</li><li>默认网站应用存放的位置为：webapps</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Host name=<span class="string">"localhost"</span>  appBase=<span class="string">"webapps"</span></span><br><span class="line">      unpackWARs=<span class="string">"true"</span> autoDeploy=<span class="string">"true"</span>&gt;</span><br></pre></td></tr></table></figure><p>具体其他配置：百度一下。</p><p><strong>面试题</strong>：<strong>请你谈谈网站是如何进行访问的</strong>？</p><ol><li>输入一个域名；回车</li><li>检查本机的 C:\Windows\System32\drivers\etc\hosts配置文件下有没有这个域名映射；<ol><li>有：直接返回对应的ip地址，这个地址中，有我们需要访问的web程序，可以直接访问</li><li>没有：去DNS服务器找，找到的话就返回，找不到就返回404；</li></ol></li></ol><p>一个网站应有的结构：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">--webapps ：Tomcat服务器的web目录</span><br><span class="line">	-ROOT</span><br><span class="line">	-xxx ：网站的目录名</span><br><span class="line">		- WEB-INF</span><br><span class="line">			-classes : java程序</span><br><span class="line">			-lib：web应用所依赖的jar包</span><br><span class="line">			-web.xml ：网站配置文件</span><br><span class="line">		- index.html 默认的首页</span><br><span class="line">		- static</span><br><span class="line">			-css</span><br><span class="line">			-style.css</span><br><span class="line">			-js</span><br><span class="line">			-img</span><br><span class="line">			-.....</span><br></pre></td></tr></table></figure><h3 id="1-4-HTTP"><a href="#1-4-HTTP" class="headerlink" title="1.4 HTTP"></a>1.4 HTTP</h3><p>HTTP（超文本传输协议）是一个简单的请求-响应协议，它通常运行在TCP之上。</p><ul><li>文本：html，字符串， ….</li><li>超文本：图片，音乐，视频，定位，地图…….</li><li>端口号：80</li></ul><p>HTTPS是安全的超文本传输协议，端口号为：443</p><p><strong>HTTP的两个版本：（面试考）</strong></p><ul><li><strong>HTTP/1.0：客户端可以与web服务器连接后，只能获得一个web资源，断开连接。</strong></li><li><strong>HTTP/1.1：客户端可以与web服务器连接后，可以获得多个web资源。</strong></li></ul><p>因为HTTP内容还是很多，待另开章补充，推荐看《图解HTTP》。</p><h2 id="2-什么是Servlet"><a href="#2-什么是Servlet" class="headerlink" title="2. 什么是Servlet"></a>2. 什么是Servlet</h2><blockquote><p>虽然MVC框架封装了Servlet，也会听到有人说可以不学，但是我觉得Servlet还是挺重要的，就是数据交互，学会了到时候前后端交互，传什么数据过来，需要传什么数据回去就很清晰。</p></blockquote><p><strong>Servlet是一个接口，是运行在服务器上的一个 Java 小程序，它可以接收客户端发送过来的请求，并响应数据给客户端</strong>。服务器都有很多Servlet，每一个Servlet的功能不一样，等待请求。</p><p><strong>Servlet的生命周期</strong>：在Servlet API就可以看到</p><ul><li>void init(ServeletConfig)：出生（一次），<strong>只有当客户端访问时才创建对应的Serlvet对象</strong>。</li><li>void service(ServletRequest request, ServletResponse response)：每次处理请求都会被调用。</li><li>void destroy()：<strong>服务结束时会调用一次，在服务器停止或者服务器把该web应用移除且卸装 Servlet 时执行该方法</strong>，类似遗言。</li></ul><p><strong>Servlet的特性</strong>：</p><ul><li>单例，一个Servlet类只有一个对象。也可能存在多个Servlet类。</li><li>线程不安全，所以它的效率是最高的（异步）。</li></ul><p><strong>Servlet的实例化是由服务器创建，而且得首次访问时才会创建</strong>。</p><p>看下Servlet的源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig var1)</span> <span class="keyword">throws</span> ServletException</span>; <span class="comment">// 在首次访问时才会创建对象</span></span><br><span class="line"></span><br><span class="line">    <span class="function">ServletConfig <span class="title">getServletConfig</span><span class="params">()</span></span>; <span class="comment">// 获取Servlet配置信息</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// ServletRequest var1：这个就是来接收客户端的请求</span></span><br><span class="line">    <span class="comment">// ServletResponse var2：响应客户端</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest var1, ServletResponse var2)</span> <span class="keyword">throws</span> ServletException, IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">getServletInfo</span><span class="params">()</span></span>; <span class="comment">// 可以提供有关 servlet 的信息，如作者、版本、版权。</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>; <span class="comment">// 在服务器停止且卸装 Servlet 时执行该方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ServletConfig：（这个的理解得看代码）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ServletConfig</span> </span>&#123; <span class="comment">// 可以看到它是一个接口，具体实现交给GenericServlet</span></span><br><span class="line">    <span class="function">String <span class="title">getServletName</span><span class="params">()</span></span>; <span class="comment">// 获取&lt;servlet-name&gt;中的内容</span></span><br><span class="line"> </span><br><span class="line">    <span class="function">ServletContext <span class="title">getServletContext</span><span class="params">()</span></span>; <span class="comment">// 获取Servlet上下文对象，非常重要</span></span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">getInitParameter</span><span class="params">(String var1)</span></span>; <span class="comment">// 通过名称获取指定Servlet初始化参数的值，基本不会用到</span></span><br><span class="line"></span><br><span class="line">    <span class="function">Enumeration&lt;String&gt; <span class="title">getInitParameterNames</span><span class="params">()</span></span>; <span class="comment">// 获得所以Servlet初始化参数的名称，基本不会用到</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对于Serlvet接口，Sun公司有两个默认的实现类：<strong>HttpServlet</strong>，GenericServlet。因为我们是面向HTTP协议的，所以使用好<strong>HttpServlet</strong>就行。</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203037122.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>HttpServlet 源码的一些方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 强制将两个参数转为http协议相关的类型，然后调用本类的service(HttpServletRequest req, HttpServletResponse resp)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> </span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">// 会通过request得到当前的请求的请求方法，例如：GET，POST等，然后根据请求方法去调用doGet()或doPost()等</span></span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span></span></span><br></pre></td></tr></table></figure><p><strong>所以如果使用HttpServlet，只需要重写doGet()，doPost()方法即可</strong>。其他的请求方法类似，比如还有PUT，DELETE等也是一样，不过这是在Restful风格才会用到的。一个继承HttpServlet的类，可以同时重写doGet()，doPost()等方法，或者只写一个，不会限制一个Servlet只能处理一种请求方式。</p><h3 id="2-1-使用Servlet"><a href="#2-1-使用Servlet" class="headerlink" title="2.1 使用Servlet"></a>2.1 使用Servlet</h3><p>可能需要导入servlet的包，这里可以使用Maven的依赖配置：需要创建Maven项目：<br><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715202849483.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>然后引入jar包：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>我这里也出现这个：（第一个也可以在线下载，第二个就是上面Maven那个）</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715202940690.png#pic_center"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/13 14:51</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        PrintWriter writer = resp.getWriter(); <span class="comment">// 响应流</span></span><br><span class="line">        writer.println(<span class="string">"hehe"</span>); <span class="comment">// 正常情况在访问时会在浏览器打印</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>我们写的是JAVA程序，但是要通过浏览器访问，而浏览器需要连接web服务器，所以我们需要再web服务中注册我们写的Servlet，还需给他一个浏览器能够访问的路径</strong>，在web.xml中配置：（这个是xml版，还有配置版）</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"4.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">metadata-complete</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注册Servlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>zhou.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Servlet的请求路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后还需要配置下Tomcat：<br><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203109769.png#pic_center"><br><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715202746944.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70"><br><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203131463.png#pic_center"></p><p>点击Fix，就会弹出来一个框，再点击就可以添加：（这里我不知道怎么了，<strong>本来会给出两个可以直接点击用的，然后我是弹出下面这个</strong>。其实重启一下IDEA就可以）</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203206736.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>其实可以看到Tomcat中自带JSP，和Servlet的包，<strong>运行时可能会冲突，如果冲突去掉自己依赖的servlet包</strong>。</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203214362.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>访问：<a href="http://localhost:8080/servlet/hello" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8080/servlet/hello</a></p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203239703.png#pic_center"></p><hr><p>我喜欢用注解版：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/13 14:51</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// name名称随意，反正不能跟其他Servlet相同，urlPatterns就是我们可以访问该Servlet的路径</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"HelloServlet"</span>, urlPatterns = <span class="string">"/hello"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        PrintWriter writer = resp.getWriter(); <span class="comment">// 响应流</span></span><br><span class="line">        writer.println(<span class="string">"hehe"</span>); <span class="comment">// 正常情况在访问时会在浏览器打印</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是我配置完，发现访问不了，原因是因为web.xml的问题：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"4.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">metadata-complete</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可能出现的问题：</p><ul><li>version=”4.0”，一定要大于3.0。</li><li>metadata-complete：<strong>如果不配置该属性，或者将其设置为false，则表示启动注解支持</strong>。但为false时，表示web.xml和注解对于Servlet的影响同时起作用，两种方法定义的url-partten都可以访问到该Servlet，但是当通过web.xml定义的url-partten访问时，注解定义的属性将失效。</li></ul><p>然后就可以访问成功了。</p><h3 id="2-2-Servlet原理"><a href="#2-2-Servlet原理" class="headerlink" title="2.2 Servlet原理"></a>2.2 Servlet原理</h3><p><a href="https://www.cnblogs.com/leiqiannian/p/7797188.html" target="_blank" rel="external nofollow noopener noreferrer">参考：Web容器、服务器、容器的理解总结</a></p><p><strong>Servlet容器/Web服务器</strong>：Servlet没有main()方法。Servlet受控于另一个Java应用，这个Java应用称为容器。Tomcat就是这样一个容器。<strong>如果web服务器应用得到一个指向servlet的请求（而不是其他请求，如请求一个普通的静态HTML），此时服务器不是把这个请求交给servlet本身，而是交给部署该servlet的容器，要由容器调用servlet的方法，如doPost()或doGet()。</strong></p><p>Servlet容器的功能：</p><ul><li><p><strong>通信支持</strong>：利用容器提供的方法，你能轻松地让servle与Web服务器对话；</p></li><li><p><strong>生命周期管理</strong>：容器控制着servlet的生与死。它会负责加载类、实例和初始化servlet、调用servlet方法，并使servlet实例能够被垃圾回收。</p></li><li><p><strong>多线程支持</strong>：容器会自动地为它接收的每个servlet请求创建一个新的java线程。针对客户机的请求，如果servlet已经运行完相应的HTTP服务方法，这个线程就会结束（也就是会死掉）。</p></li><li><p><strong>声明方式实现安全</strong>：利用容器，可以使用XML部署描述文件配置（和修改）安全性，而不必将其硬编码写到servlet（或其他）类代码中。</p></li><li><p><strong>JSP支持</strong>：负责把JSP代码翻译成真正的java。</p></li></ul><p><strong>Servlet的执行过程</strong>：（<strong>非常重要</strong>）</p><ul><li>第一步：客户端向Web服务器发出指向servlet的http请求。</li><li>第二步：Web服务器先检查是否已经创建该Servlet的实例，如果为未创建则创建，如果创建，则直接调到第三步。</li><li>第三步：Web服务器创建ServletRequest对象并把客户端的http请求信息封装进去，并且创建ServletResponse对象。</li><li>第四步：调用该Servlet的service方法，先把Request对象和Response对象转为HttpServletRequest对象和HttpServletResponse对象，然后根据HttpRequest对象中的请求方法（GET，POST等），调用相应的方法（doGet()或doPost()等）。</li><li>第五步：执行doGet()或doPost()等完毕后，把想要返回给客户端的结果封装进HttpReHsponse对象，然后返回给客户端。</li></ul><p>（图的话可能有点乱）</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203328838.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><blockquote><p>关于Servlet的路径配置，如果要想任何访问都调用一个servlet可以使用路径：/* ， * 就是一个通配符，还可以这样：flung/* ，这样：*.aaa 等。</p><p>但是关于通配符是有优先级关系的，<strong>指定了固有的映射路径优先级最高，如果找不到就会走默认的处理请求</strong> 。</p></blockquote><h3 id="2-3-ServletContext"><a href="#2-3-ServletContext" class="headerlink" title="2.3 ServletContext"></a>2.3 ServletContext</h3><p>web容器在启动的时候，它会为每个Web项目都创建一个对应的ServletContext对象，<strong>ServletContext可以理解为Servlet数据共享区</strong>，也可以称为中间商或上下文对象，<strong>一个Web项目只有一个ServletContext对象，可以在N个Servlet中来获取这个唯一的对象，使用它可以给多个Servlet传送数据。</strong></p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203317412.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>ServletContext的生命周期：随着Web容器的启动而创建，随着Web容器的关闭而消亡。</p><h4 id="2-3-1-共享数据"><a href="#2-3-1-共享数据" class="headerlink" title="2.3.1 共享数据"></a>2.3.1 共享数据</h4><p>把数据保存在一个Servlet，在另一个Servlet可以拿到。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/14 9:28</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"SetServlet"</span>, urlPatterns = <span class="string">"/set"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SetServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// getServletContext()已经在GenericServlet父类写好了，使用this来获取</span></span><br><span class="line">        ServletContext servletContext = <span class="keyword">this</span>.getServletContext();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 传入数据，设置键值对，这跟Session相同，其实ServletContext跟Session有关系的，待说</span></span><br><span class="line">        servletContext.setAttribute(<span class="string">"username"</span>, <span class="string">"小明"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/14 9:31</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"GetServlet"</span>, urlPatterns = <span class="string">"/get"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 想要获取数据，还是得先获取ServletContext对象</span></span><br><span class="line">        ServletContext servletContext = <span class="keyword">this</span>.getServletContext();</span><br><span class="line"></span><br><span class="line">        String username = (String) servletContext.getAttribute(<span class="string">"username"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果数据中有中文，在响应时必须设置编码，固定下面这两句</span></span><br><span class="line">        resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        resp.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">		<span class="comment">// 也可以这样：</span></span><br><span class="line">        <span class="comment">// response.setHeader("Content-type", "text/html;charset=UTF-8");</span></span><br><span class="line">        <span class="comment">// resp.setContentType("text/html;charset=UTF-8");</span></span><br><span class="line">        </span><br><span class="line">        resp.getWriter().print(<span class="string">"名字:"</span> + username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>对于中文，注意需要设置编码问题</strong>，上面那两句设置编码的可以直接死记。</p><p>输出结果：</p><ul><li>情况一：先直接访问 /get，会发现：名字:null，说明拿不到值；</li><li>情况二：先访问 /set，在访问 /get，输出：名字:小明。</li><li>情况三：经过情况二，然后几次刷新 /get，都会发现该值已经存在 ServletContext 中了，除非去主动销毁（<strong>servletContext.removeAttribute(“username”);</strong>）或者停下Web服务器，否则一直存在该键值对。</li></ul><p>注意：<strong>使用setAttribute()，如果键相同值不同，会覆盖掉原先值</strong>。</p><h4 id="2-3-2-获得初始化参数"><a href="#2-3-2-获得初始化参数" class="headerlink" title="2.3.2 获得初始化参数"></a>2.3.2 获得初始化参数</h4><p>可以预先在web.xml配置一些键值对，只要Web服务器一启动，就可以获取到。跟上面不同的是上面是访问一个Servlet才设置一些键值对。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置一些web应用初始化参数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>url<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/mybatis<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/14 9:50</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"GetInitServlet"</span>, urlPatterns = <span class="string">"/getInit"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetInitServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext servletContext = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        String url = servletContext.getInitParameter(<span class="string">"url"</span>);</span><br><span class="line">        resp.getWriter().println(url);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-3-请求转发"><a href="#2-3-3-请求转发" class="headerlink" title="2.3.3 请求转发"></a>2.3.3 请求转发</h4><p>表面上看起来是在访问这个Servlet，实际上访问另一个Servlet，或者这样理解访问一个Servlet，会跳转到另一个Servlet。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/14 10:00</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"DispatcherServlet"</span>, urlPatterns = <span class="string">"/forward"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DispatcherServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext servletContext = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        RequestDispatcher requestDispatcher = servletContext.getRequestDispatcher(<span class="string">"/hello"</span>); <span class="comment">// 转发的请求路径</span></span><br><span class="line">        requestDispatcher.forward(req, resp); <span class="comment">// 调用 forward实现转发，转发需要带入HttpServletRequest，HttpServletResponse到另一个Servlet</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>熟练的话可以这样写：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/14 10:00</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"DispatcherServlet"</span>, urlPatterns = <span class="string">"/forward"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DispatcherServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.getServletContext().getRequestDispatcher(<span class="string">"/hello"</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>转发跟重定向：</p><ul><li><strong>转发，可能会携带当前访问的页面的某些信息/数据，然后跳转到另一个页面，但是URL不变。</strong></li><li><strong>重定向，也是跳转到另一个页面，只是简单的页面跳转不会携带数据，但是URL会变。</strong></li></ul><p>所以重定向只能重定向到webapp中的页面，对于目前的项目结构来说：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resp.sendRedirect(<span class="string">"/index.jsp"</span>);</span><br></pre></td></tr></table></figure><p>访问时还需要注意Tomcat的路径，我是：<a href="http://localhost:8081/，就可以访问到index.jsp，如果是这样：http://localhost:8081/xxx/，那么应该这样写：" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8081/，就可以访问到index.jsp，如果是这样：http://localhost:8081/xxx/，那么应该这样写：</a>(如何修改Tomcat的访问路径？到IDEA右上角那个Tomcat中，先点进点Tomca配置，再点进Deployment中的Application contxt那修改)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resp.sendRedirect(<span class="string">"/xxx/index.jsp"</span>);</span><br></pre></td></tr></table></figure><h4 id="2-3-4-读取资源文件"><a href="#2-3-4-读取资源文件" class="headerlink" title="2.3.4 读取资源文件"></a>2.3.4 读取资源文件</h4><p>像在Spring，SpringBoot中都有这个后缀文件：.properties，它的作用可以存放一些对数据库连接的配置等等。</p><p>在resources目录下新建 .properties文件，然后填写：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure><p> 现在先用路径来找到这个文件，先启动Tomcat，就会在项目中出现一个target文件：</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203400177.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/14 10:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"PropertiesServlet"</span>, urlPatterns = <span class="string">"/properties"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 根据上面的路径，ser是我的项目名，在项目中的 /WEB-INF/classes/db.properties</span></span><br><span class="line">        InputStream resourceAsStream = <span class="keyword">this</span>.getServletContext().getResourceAsStream(<span class="string">"/WEB-INF/classes/db.properties"</span>);</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.load(resourceAsStream);</span><br><span class="line">        String root = properties.getProperty(<span class="string">"username"</span>);</span><br><span class="line">        String password = properties.getProperty(<span class="string">"password"</span>);</span><br><span class="line">        resp.getWriter().println(root + <span class="string">" "</span> + password);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4-HttpServletResponse"><a href="#2-4-HttpServletResponse" class="headerlink" title="2.4 HttpServletResponse"></a>2.4 HttpServletResponse</h3><p>web服务器接收到客户端的http请求，针对这个请求，分别创建一个代表请求的HttpServletRequest对象，代表响应的一个HttpServletResponse；</p><ul><li>如果要获取客户端请求过来的参数：HttpServletRequest</li><li>如果要给客户端响应一些信息：HttpServletResponse</li></ul><p>负责向浏览器发送数据的方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ServletOutputStream <span class="title">getOutputStream</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>;</span><br><span class="line"><span class="function">PrintWriter <span class="title">getWriter</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>;</span><br></pre></td></tr></table></figure><p>其他可以设置响应头的方法…</p><p>在HttpServletResponse中还可以看到很多状态码，也提供一个方法设置状态码。</p><p>HttpServletResponse除了向浏览器发送信息，还有其他功能：</p><h4 id="2-4-1-下载文件（了解）"><a href="#2-4-1-下载文件（了解）" class="headerlink" title="2.4.1 下载文件（了解）"></a>2.4.1 下载文件（了解）</h4><p>步骤：（了解）</p><ol><li>要获取下载文件的路径</li><li>截取下载的文件名</li><li>设置响应让浏览器能够支持下载我们需要的东西</li><li>获取下载文件的输入流</li><li>创建缓冲区</li><li>获取OutputStream对象</li><li>将FileOutputStream流写入到buffer缓冲区，使用OutputStream将缓冲区中的数据输出到客户端</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/14 14:47</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"DownServlet"</span>, urlPatterns = <span class="string">"/down"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DownServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 1. 要获取下载文件的路径，如何看路径，还是在项目的target文件看</span></span><br><span class="line">        String realPath = <span class="keyword">this</span>.getServletContext().getRealPath(<span class="string">"/WEB-INF/classes/2.png"</span>);</span><br><span class="line">        System.out.println(realPath);</span><br><span class="line">        <span class="comment">// 2. 下载的文件名是啥</span></span><br><span class="line">        String fileName = realPath.substring(realPath.lastIndexOf(File.separator) + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 3. 设置响应让浏览器能够支持下载我们需要的东西，不用记这个头</span></span><br><span class="line">        <span class="comment">// 如果文件名带有中文，还得设置中文编码: URLEncoder.encode()</span></span><br><span class="line">        <span class="comment">// 如果设置响应编码是没用的，我试了：resp.setContentType("text/html;charset=UTF-8");</span></span><br><span class="line">        resp.setHeader(<span class="string">"Content-Disposition"</span>, <span class="string">"attachment; filename="</span> + URLEncoder.encode(fileName, <span class="string">"UTF-8"</span>));</span><br><span class="line">        <span class="comment">// 4. 获取下载文件的输入流</span></span><br><span class="line">        FileInputStream input = <span class="keyword">new</span> FileInputStream(realPath);</span><br><span class="line">        <span class="comment">// 5. 创建缓冲区</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">// 6. 获取OutputStream对象</span></span><br><span class="line">        ServletOutputStream output = resp.getOutputStream();</span><br><span class="line">        <span class="comment">// 7. 将FileOutputStream流写入到buffer缓冲区, 使用OutputStream将缓冲区中的数据输出到客户端</span></span><br><span class="line">        <span class="keyword">while</span>((len = input.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            output.write(buffer);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        output.close();</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-4-2-重定向"><a href="#2-4-2-重定向" class="headerlink" title="2.4.2 重定向"></a>2.4.2 重定向</h4><p>这个在上面转发那里讲了，需要用到的是：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resp.sendRedirect();</span><br></pre></td></tr></table></figure><p>需要传入参数，一个路径，表示的是要重定向到哪个网页。回想登录后会跳转，上面的URL会变。</p><p>面试题：请你聊聊重定向和转发的区别？</p><ul><li>相同点<ul><li>页面都会实现跳转</li></ul></li><li>不同点<ul><li>请求转发的时候，url不会产生变化，状态码：307</li><li>重定向时候，url地址栏会发生变化，状态码：302</li></ul></li></ul><h3 id="2-5-HttpServletRequest"><a href="#2-5-HttpServletRequest" class="headerlink" title="2.5 HttpServletRequest"></a>2.5 HttpServletRequest</h3><p>HttpServletRequest代表客户端的请求，用户通过Http协议访问服务器，HTTP请求中的所有信息会被封装到HttpServletRequest，通过这个HttpServletRequest的方法，获得客户端的所有信息；</p><p>可以获得前端传递过来的参数：（比如表单）（中间两个方法）</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203427642.png#pic_center"></p><p>需要注意的是，Servlet接收的HttpServletRequest中包含中文，如果没设置HttpServletRequest的编码，则乱码。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br></pre></td></tr></table></figure><p>还可以获取项目路径：写路径时就不会写死。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.getContextPath();</span><br></pre></td></tr></table></figure><h2 id="3-Cookie，Session"><a href="#3-Cookie，Session" class="headerlink" title="3. Cookie，Session"></a>3. Cookie，Session</h2><h3 id="3-1-会话"><a href="#3-1-会话" class="headerlink" title="3.1 会话"></a>3.1 会话</h3><p><strong>会话</strong>：用户打开一个浏览器，点击了很多超链接，访问多个web资源，关闭浏览器，这个过程可以称之为会话。</p><p><strong>有状态会话</strong>：一个同学来过教室，下次再来教室，我们会知道这个同学，曾经来过，称之为有状态会话。</p><p><strong>无状态会话</strong>：跟上面的意思相反，你来就来，我不需要记住你是否来过。</p><p>一个网站，怎么证明你来过？</p><ol><li>服务端给客户端一个 信件，客户端下次访问服务端带上信件就可以了； 这个信件就是 Cookie</li><li>服务器登记你来过了，下次你来的时候我来匹配你； 这使用到 Seesion</li></ol><h3 id="3-2-保存会话的两种技术"><a href="#3-2-保存会话的两种技术" class="headerlink" title="3.2 保存会话的两种技术"></a>3.2 保存会话的两种技术</h3><p>Session：</p><ul><li>服务器技术，利用这个技术，<strong>可以保存用户的会话信息（比如用户登录信息）。 一个用户对服务器的多次连贯性请求！所谓连贯性请求，就是该用户多次请求中间没有关闭浏览器！会话就是对话，可共享数据。</strong></li><li><strong>Session生命周期</strong>：会话范围是某个用户从首次访问服务器开始，到该用户关闭浏览器结束！</li></ul><p>Cookie：</p><ul><li>客户端技术 （响应，请求），<strong>Cookie是HTTP协议制定的！由服务器保存Cookie发送到浏览器，浏览器会把Cookie保存到本地，再下次浏览器请求服务器时把上一次请求得到Cookie再归还给服务器</strong>。</li><li>其实Cookie就是由服务器创建保存到客户端浏览器的一个<strong>键值对</strong>，允许有多个键值对。</li><li><strong>Cookie生命周期</strong>：首次访问服务器则创建，默认情况下，关闭浏览器则销毁。</li></ul><h3 id="3-3-Cookie"><a href="#3-3-Cookie" class="headerlink" title="3.3 Cookie"></a>3.3 Cookie</h3><p>Http协议是无状态协议，不会保留什么数据，只管传。</p><p>Http协议规定（保证不给浏览器太大压力）：</p><ul><li><p>1个Cookie只能保存一个信息</p></li><li><p>1个Cookie最大4KB</p></li><li><p>1个服务器最多向1个浏览器保存20个Cookie</p></li><li><p>1个浏览器最多可以保存300个Cookie</p></li></ul><p>Cookie 的应用：</p><ul><li>服务器使用Cookie来跟踪客户端状态！识别用户。</li><li><strong>显示上次登录名(也是一个用户多个请求)</strong>，这个很常见。</li></ul><p><strong>Cookie是不能跨浏览器的！</strong></p><p>Cookie的使用：</p><p>原始方式（了解）：</p><ul><li>使用response发送Set-Cookie响应头：response.addHeader(“Set-Cookie”, “aaa=AAA”)</li><li>使用request获取Cookie请求头：req.getHeader(“Cookie”)</li></ul><p>便捷方式（掌握）：</p><ul><li><strong>使用response.addCookie()方法向浏览器保存Cookie，需要new一个Cookie，传入键值对，必须都是字符串。</strong></li><li><strong>使用request.getCookies()方法获取浏览器归还的Cookie，返回一个Cookie[]</strong></li></ul><p>来看看Cookie的部分源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">private</span> String name; <span class="comment">// 键</span></span><br><span class="line">   <span class="keyword">private</span> String value; <span class="comment">// 值</span></span><br><span class="line"><span class="comment">// Cookie的最大生命，即Cookie可保存的最大时长。以秒为单位</span></span><br><span class="line"><span class="comment">// maxAge &gt; 0 : 浏览器会把Cookie保存到客户机硬盘上，有效时长为maxAge的值决定。</span></span><br><span class="line">	<span class="comment">// maxAge &lt; 0 : Cookie只在浏览器内存中存在，当用户关闭浏览器时，浏览器进程结束，同时Cookie也就死亡了。</span></span><br><span class="line">   <span class="comment">// maxAge = 0 : 浏览器会马上删除这个Cookie！</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> maxAge = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String path;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String domain;</span><br></pre></td></tr></table></figure><p>Cookie的path属性：</p><ul><li>并不是设置这个Cookie在客户端的保存路径！！！</li><li>Cookie的path由服务器创建Cookie时设置，当浏览器访问服务器某个路径时，需要归还哪些Cookie给服务器呢？这由Cookie的path决定。</li><li>浏览器访问服务器的路径，如果包含某个Cookie的路径，那么就会归还这个Cookie。</li><li>代码：cookie.setPath(“url”)</li><li>例如：aCookie.path=/day11_1/ 和 bCookie.path=/day11_1/jsps/<ul><li>访问：/day11_1/index.jsp时，归还：aCookie</li><li>访问：/day11_1/jsps/a.jsp时，归还：aCookie、bCookie</li></ul></li></ul><p>Cookie的domain属性（了解）：</p><ul><li>domain用来指定Cookie的域名！当多个二级域中共享Cookie时才有用。</li><li>例如: <a href="http://www.baidu.com/" target="_blank" rel="external nofollow noopener noreferrer">www.baidu.com</a>、<a href="http://zhidao.baidu.com/" target="_blank" rel="external nofollow noopener noreferrer">zhidao.baidu.com</a>、<a href="http://news.baidu.com/" target="_blank" rel="external nofollow noopener noreferrer">news.baidu.com</a>、<a href="http://tieba.baidu.com/" target="_blank" rel="external nofollow noopener noreferrer">tieba.baidu.com</a> 之间共享Cookie时可以使用domain</li><li>设置domain为：cookie.setDomain(“.<a href="http://baidu.com/" target="_blank" rel="external nofollow noopener noreferrer">baidu.com”);</a></li><li>设置path为：cookie.setPath(“/“);</li></ul><p>Cookie不能存储中文会乱码，如果想要存储，必须这样：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">URLEncoder.encode(<span class="string">"小明"</span>,<span class="string">"utf-8"</span>); <span class="comment">// 编码</span></span><br></pre></td></tr></table></figure><p>获取时：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">URLDecoder.decode(cookie.getValue(),<span class="string">"UTF-8"</span>); <span class="comment">// 解码</span></span><br></pre></td></tr></table></figure><p>Cookie不能存储特殊字符，比如：空格、分号（;）、逗号（,）、等号（=），暂时测试这4个，其他：<strong>(), $, !, -可以存储</strong>。</p><blockquote><p>Cookie Version 1规定中放宽了限制，可以使用某些特殊字符，但是考虑到新版本的Cookie规范目前仍然没有为所有的浏览器所支持，因而为保险起见，我们应该在Cookie的内容中尽量避免使用这些字符。</p></blockquote><p><strong>Cookie虽然不能存储特殊字符，但是可以可以对特殊字符进行加密来存储，使用URLEncoder；解密来获取，使用URLDecode</strong>，看下面代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 记录上次访问的时间</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/14 20:26</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"WalkServlet"</span>, urlPatterns = <span class="string">"/walk"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WalkServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        req.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">        resp.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 浏览器默认会给几个</span></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        PrintWriter writer = resp.getWriter();</span><br><span class="line">        </span><br><span class="line">        SimpleDateFormat simpleDateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">        <span class="comment">// 加密/编码</span></span><br><span class="line">        String encoding = URLEncoder.encode(simpleDateFormat.format(<span class="keyword">new</span> Date()), <span class="string">"utf-8"</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(cookies != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span>(Cookie cookie : cookies) &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">"lastTime"</span>.equals(cookie.getName())) &#123;</span><br><span class="line">                    <span class="comment">// 因为cookie.getValue()包含特殊字符，直接获取会出错</span></span><br><span class="line">                    <span class="comment">// String value = cookie.getValue();</span></span><br><span class="line">                    <span class="comment">// 解密</span></span><br><span class="line">                    String decode = URLDecoder.decode(cookie.getValue(), <span class="string">"utf-8"</span>);</span><br><span class="line">                    writer.println(<span class="string">"你上次访问的时间为："</span> + decode);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 存储Cookie时，值传入加密的</span></span><br><span class="line">        resp.addCookie(<span class="keyword">new</span> Cookie(<span class="string">"lastTime"</span>, encoding));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4-Session（重要）"><a href="#3-4-Session（重要）" class="headerlink" title="3.4 Session（重要）"></a>3.4 Session（重要）</h3><p>服务器会为每个客户端创建一个Session对象，Session就好比客户在服务器端的账户，它们被服务器保存到一个Map中，这个Map被称之为<strong>Session缓存</strong>！</p><p>获取Session对象：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HttpSession session = request.getSession();</span><br></pre></td></tr></table></figure><p>request.getSession(false)、request.getSession(true)、request.getSession()：</p><ul><li>后两个方法效果相同。</li><li>第一个方法：如果Session缓存中，找不到对应的Session，那么返回null，并且不会创建Session对象。</li></ul><p>服务器会给每一个用户（浏览器）创建一个Session对象后，会执行下面两条代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"JSESSIONID"</span>,sessionId); <span class="comment">// sessionId是创建Session对象分配的，JSESSIONID其实就是身份证</span></span><br><span class="line">resp.addCookie(cookie);</span><br></pre></td></tr></table></figure><p>所以Session跟Cookie是息息相关的。</p><p>Session特点：</p><ul><li><strong>服务器会给每一个用户（浏览器）创建一个Session对象；Session是服务器端对象，保存在服务器端！！！</strong></li><li><strong>一个Seesion独占一个浏览器，只要浏览器没有关闭，这个Session就存在</strong>。</li><li>Session的数据没有大小的限制，而且数据是安全的。（Cookie数据是不安全的，因为我们在浏览器可以看到）</li><li>因为Http协议是无状态协议，当传输完就关闭，如果客户端在网站跳转它的子页面，用户信息会传不过去，导致得重新登录，所以需要Session。有了Session，用户登录之后，整个网站它都可以访问！–&gt; 保存用户的信息；保存购物车的信息…..</li></ul><p>Session的使用：常用三个方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setAttribute</span><span class="params">(String var1, Object var2)</span></span>;</span><br><span class="line">    <span class="function">Object <span class="title">getAttribute</span><span class="params">(String var1)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeAttribute</span><span class="params">(String var1)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他方法，了解</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">invalidate</span><span class="params">()</span> <span class="comment">// 让session失效！调用这个方法会被session失效，当session失效后，客户端再次请求，服务器会给客户端创建一个新的session，并在响应中给客户端新session的sessionId；--- 有些网站登陆后可以退出，这就要废掉session</span></span></span><br><span class="line"><span class="function">    <span class="keyword">void</span> <span class="title">setMaxInactiveInterval</span><span class="params">()</span> <span class="comment">// 设置session可以的最大不活动时间（秒）</span></span></span><br><span class="line"><span class="function">    <span class="keyword">int</span> <span class="title">getMaxInactiveInterval</span><span class="params">()</span> <span class="comment">// 获取session可以的最大不活动时间（秒），默认为30分钟。当session在30分钟内没有使用，那么Tomcat会在session池中移除这个session；</span></span></span><br><span class="line"><span class="function">     String <span class="title">getId</span><span class="params">()</span> <span class="comment">// 获取sessionId；</span></span></span><br><span class="line"><span class="function">     <span class="keyword">boolean</span> <span class="title">isNew</span><span class="params">()</span> <span class="comment">// 查看session是否为新。当客户端第一次请求时，服务器为客户端创建session，但这时服务器还没有响应客户端，也就是还没有把sessionId响应给客户端时，这时session的状态为新。</span></span></span><br></pre></td></tr></table></figure><blockquote><p>跟ServletContext一样，那么功能主要是前后端共享数据。下面会说到它们的区别</p></blockquote><p><strong>HttpSession原理</strong>：其实就是：request.getSession()的步骤：</p><ul><li><strong>获取客户端的Cookie中的 JSESSIONID (跟身份证一样)，然后到Session缓存查询</strong><ul><li><strong>如果SessionId不存在，创建Session，把Session保存起来，把新创建的SessionId保存到Cookie中</strong></li><li><strong>如果SessionId存在，通过SessionId查找Session对象，如果没有查找到，创建Session，把Session保存起来，把新创建的SessionId保存到Cookie中；如果通过sessionId查找到了session对象，那么就不会再创建session对象了。</strong></li></ul></li><li><strong>如果创建了新的Session，浏览器会得到一个包含了SessionId的Cookie，这个Cookie的生命为-1，即只在浏览器内存中存在，如果不关闭浏览器，那么Cookie就一直存在。</strong></li><li><strong>下次请求时，再次执行request.getSession()方法时，因为可以通过Cookie中的SessionId找到Session对象，所以与上一次请求使用的是同一Session对象。</strong></li></ul><p>一些细节：</p><ol><li><p>当客户端关闭后，服务器不关闭，两次获取的session是否为同一个？</p><ul><li>默认情况下，不是。</li><li>如果想要相同，可以创建Cookie，写一个 JSESSIONID和值，并设置MaxAge，让Cookie持久化保存。</li></ul></li><li><p><strong>客户端不关闭，服务器在此期间被重启一次，两次获取的session是同一个吗？</strong></p><ul><li>不是同一个。但是要确保数据不丢失，得这样做：<ul><li><strong>Session钝化：在服务器正常关闭之前，将Session对象序列化到磁盘上；</strong></li><li><strong>Session活化：在服务器启动后，将Session文件转化为内存中的Session对象。</strong></li></ul></li><li>其实Tomcat会自动帮我们做完这两件事。如果是本地Tomcat，在Session钝化时，会在Tomcat目录下的 <code>work\Catalina\localhost</code>会生成你的项目名文件，然后在里面会生成一个文件，是存储Session对象的文件；当Tomcat启动时会把该Session加载进内存，然后用户又可以读取到。</li><li>在IDEA中会在这里生成：<code>C:\Users\chast\.IntelliJIdea2019.2\system\tomcat\Unnamed_ser</code> ， 在里面会看到work</li></ul></li></ol><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203519542.png#pic_center"></p><ul><li>场景：像淘宝双十一抢购，我们会先登进网站等待（创建Session），但是可能长时间不操作，会有很多Session占用内存，浪费内存；而为了更好的处理，使用了Session的钝化和活化，将长时间无操作的Session放进磁盘，等到要用时再从磁盘拿到内存来。也有可能会设置Session的生命周期，如果超过一定时间，该Session就会失效，用户下次要用时可能要重新登录。</li></ul><ol start="3"><li><p>Session什么时候被销毁？</p><ul><li>服务器关闭；</li><li>Session对象调用invalidate()方法，主动销毁</li><li><strong>Session默认失效时间，30分钟。</strong></li></ul><p>默认失效时间也可以修改，在项目中的web.xml：（也可以使用Session的setMaxInactiveInterval()）</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--设置Session默认的失效时间--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--15分钟后Session自动失效，以分钟为单位--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure><p>也可以在Tomcat中的conf的web.xml设置，它是所有项目的web.xml的父配置文件。</p></li></ol><p>Session除了Cookie来实现，还可以使用<strong>URL重写</strong>来实现，因为在浏览器我们可以禁用Cookie，那么就需要用URL重写来实现Session：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有两个功能：转码，和创建Session，需要传入一个Servlet的URL，URL必须是指向本站的URL。</span></span><br><span class="line"><span class="comment">// 它会查看Cookie是否存在，如果不存在，在指定的URL后添加JSESSIONID参数，如果Cookie存在，则不会再URL后添加日任何东西。</span></span><br><span class="line">resp.encodeURL();</span><br></pre></td></tr></table></figure><p>网上看到一条对Session不错的<strong>总结</strong>：</p><ol><li><strong>在客户端访问服务器时，服务器会给每一个用户创建一个Session对象，由于Session为用户浏览器独享，所以用户在访问服务器的web资源时，可以把各自的数据放在各自的session中，当用户再去访问服务器中的其它Web资源时，其它Web资源再从用户各自的session中取出数据为用户服务。</strong></li><li><strong>在第一次调用request.getSession()方法时，服务器会检查是否已经有对应的session，如果没有就在内存中创建一个并返回。</strong><br><strong>当一段时间内，session没有被使用（默认是30分钟），服务器会销毁该session。如果服务器非正常关闭（强行关闭），还未到期的session也会被销毁。</strong></li><li><strong>可以主动调用session的invalidate()方法销毁session。</strong></li></ol><blockquote><p> 参考：作者：Zhuang_ET，链接：<a href="https://www.jianshu.com/p/6c02951267d8" target="_blank" rel="external nofollow noopener noreferrer">https://www.jianshu.com/p/6c02951267d8</a></p></blockquote><h2 id="4-JSP（了解）"><a href="#4-JSP（了解）" class="headerlink" title="4. JSP（了解）"></a>4. JSP（了解）</h2><p>我知道JSP不用学，但是发现JSP里面的一些概念挺重要的，需要了解JSP的一些概念。</p><h3 id="4-1-什么是JSP？"><a href="#4-1-什么是JSP？" class="headerlink" title="4.1 什么是JSP？"></a>4.1 什么是JSP？</h3><p>Java Server Pages ： Java服务器端页面，也和Servlet一样，用于动态Web技术！<br>最大的特点：</p><ul><li>写JSP就像在写HTML</li></ul><p>区别：</p><ul><li>HTML只给用户提供静态的数据</li><li>JSP页面中可以嵌入JAVA代码，为用户提供动态数据；</li></ul><h3 id="4-2、JSP原理"><a href="#4-2、JSP原理" class="headerlink" title="4.2、JSP原理"></a>4.2、JSP原理</h3><p>JSP到底怎么执行的？</p><ul><li><p>在代码层面还是JSP</p></li><li><p>这时从Tomcat内部工作入手</p><ul><li>如果是本地Tomcat：</li></ul></li></ul><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203636696.png#pic_center"></p><ul><li>如果是IDEA的Tomcat：</li></ul><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203702537.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><ul><li>关于IDEA的Tomcat如果没有则在：下面的路径下找</li></ul><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203712130.png#pic_center"></p><ul><li>发现JSP页面转变成了Java程序！</li></ul><p>看看这个的源码，会发现继承一个HttpJspBase（了解）</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203729582.png#pic_center"><br><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/2020071520373753.png#pic_center"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 里面还可以发现三个方法，跟Servlet类似的三个方法</span></span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspInit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//销毁</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//JSPService</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspService</span><span class="params">(.HttpServletRequest request,HttpServletResponse response)</span></span></span><br></pre></td></tr></table></figure><p>如果加入了JSP，来看看客户端访问浏览器的JSP页面的整个过程（了解）</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203748705.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>所以可以得到（记一记）：<strong>浏览器向服务器发送请求，不管访问什么资源，其实都是在访问Servlet！ JSP本质上就是一个Servlet</strong></p><p>基础语法就不用看了。。</p><h2 id="5-域对象"><a href="#5-域对象" class="headerlink" title="5. 域对象"></a>5. 域对象</h2><p>域表示的是一个作用范围，JavaWeb中有4大域：ServletContext，Session，Request，PageContext。PageContext域只有JSP才有，Servlet只有前面3个。</p><h3 id="5-1-ServletContext"><a href="#5-1-ServletContext" class="headerlink" title="5.1 ServletContext"></a>5.1 ServletContext</h3><p>生命周期：当Web应用加入Web容器时，就会创建代表整一个Web应用的ServletContext对象，当服务器关闭，ServletContext对象会被销毁。</p><p>作用范围：这个Web应用。</p><p>作用：这个Web应用中的所有Sevlet共享一个ServletContext对象，所以所有的Servlet对象之间可以通过ServletContext来通讯。</p><p>应用：上面有说。</p><h3 id="5-2-ServletRequest"><a href="#5-2-ServletRequest" class="headerlink" title="5.2 ServletRequest"></a>5.2 ServletRequest</h3><p>生命周期：客户端发送到服务器的请求（对一个Sevlet的URL发起访问），在调用service()前，服务器会创建ServletRequest对象，整个请求结束，ServletRequest生命周期就结束。</p><p>作用范围：一次请求。</p><p>应用：获取客户端的信息。</p><h3 id="5-3-Session"><a href="#5-3-Session" class="headerlink" title="5.3 Session"></a>5.3 Session</h3><p>生命周期：服务器会为每个客户端创建一个Session对象，当浏览器长时间不操作，或者关闭浏览器，Session就失效。</p><p>作用范围：一次会话。</p><h3 id="5-4-PageContext（了解）"><a href="#5-4-PageContext（了解）" class="headerlink" title="5.4 PageContext（了解）"></a>5.4 PageContext（了解）</h3><p>只能在JSP用，是四大域中作用范围最小的。</p><blockquote><p>参考： 作者：Zhuang_ET，链接：<a href="https://www.jianshu.com/p/6c02951267d8" target="_blank" rel="external nofollow noopener noreferrer">https://www.jianshu.com/p/6c02951267d8</a></p></blockquote><h2 id="6-JavaBean"><a href="#6-JavaBean" class="headerlink" title="6. JavaBean"></a>6. JavaBean</h2><p>实体类<br>JavaBean有特定的写法：</p><ul><li>必须要有一个无参构造</li><li>属性必须私有化</li><li>必须有对应的get/set方法；</li></ul><p>一般用来和数据库的字段做映射 ORM（对象关系映射）；<br>比如：</p><ul><li>表—&gt;类</li><li>字段–&gt;属性</li><li>行记录—-&gt;对象</li></ul><h2 id="7-MVC三层架构"><a href="#7-MVC三层架构" class="headerlink" title="7. MVC三层架构"></a>7. MVC三层架构</h2><p>MVC： 把各个大写字母拆开得：Model view Controller，中文翻译为模型、视图、控制器 。</p><p>以前：</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203809857.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">servlet--CRUD--&gt;数据库</span><br><span class="line">弊端：程序十分臃肿，不利于维护</span><br><span class="line">servlet的代码中：处理请求、响应、视图跳转、处理JDBC、处理业务代码、处理逻辑代码</span><br></pre></td></tr></table></figure><p>架构：<strong>没有什么是加一层解决不了的！</strong></p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203822869.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>Model</p><ul><li>业务处理 ：业务逻辑（Service，以service命名包），如果是大型的，对于业务逻辑还可以分：service（业务逻辑接口）, serviceImpl（业务逻辑实现）</li><li>数据持久层：CRUD （Dao）</li><li>实体：JavaBean（以pojo，entity命名包）</li></ul><p>View</p><ul><li>展示数据</li><li>提供链接发起Servlet请求 （a，form，img…）</li></ul><p>Controller （Servlet）</p><ul><li>接收用户的请求 ：（req：请求参数、Session信息….）</li><li>交给业务层处理对应的代码</li><li>控制视图的跳转</li></ul><p>例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">登录---&gt;接收用户的登录请求---&gt;处理用户的请求（获取用户登录的参数，username，password）----&gt;交给业务层处理登录业务（判断用户名密码是否正确：事务）---&gt;Dao层查询用户名和密码是否正确--&gt;数据库</span><br></pre></td></tr></table></figure><p>可能有时候项目简单，业务逻辑都写在了Controller，而在service层就调用Dao的CRUD。体现不出service的特点。</p><h2 id="8-Filter"><a href="#8-Filter" class="headerlink" title="8. Filter"></a>8. Filter</h2><p>Filter：过滤器 ，用来过滤网站的数据；</p><ul><li>处理中文乱码</li><li>禁用缓存</li><li>防止脚本攻击</li><li>支持跨域资源访问（什么是跨域？看下面）</li></ul><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203842184.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p><strong>Filter是在javax.servlet包中</strong>，在IDEA中可以看到很多Filter，注意包名。Filter是一个接口：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig var1)</span> <span class="keyword">throws</span> ServletException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest var1, ServletResponse var2, FilterChain var3)</span> <span class="keyword">throws</span> IOException, ServletException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其实跟Servlet一样，只不过Servlet已有实现类，而Filter是得我们自己去写。</p><p>示例：处理乱码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/15 12:27</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 必须配置，也可以在web.xml配置</span></span><br><span class="line"><span class="meta">@WebFilter</span>(filterName = <span class="string">"CharacterEncodingFilter"</span>, urlPatterns = &#123;</span><br><span class="line">    <span class="string">"/*"</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharacterEncodingFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="comment">//初始化：web服务器启动，就以及初始化了，随时等待过滤对象出现！</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span></span></span><br><span class="line"><span class="function">            ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"CharacterEncodingFilter初始化"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*Chain : 链</span></span><br><span class="line"><span class="comment">    /*</span></span><br><span class="line"><span class="comment">    * 1. 过滤中的所有代码，在过滤特定请求的时候都会执行</span></span><br><span class="line"><span class="comment">    * 2. 必须要让过滤器继续同行</span></span><br><span class="line"><span class="comment">    *	chain.doFilter(request,response);</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse</span></span></span><br><span class="line"><span class="function"><span class="params">            response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">        request.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">        response.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"CharacterEncodingFilter执行前...."</span>);</span><br><span class="line">        <span class="comment">// 固定调用</span></span><br><span class="line">        chain.doFilter(request,response); <span class="comment">//让我们的请求继续走，如果不写，程序到这里就被拦截停止！</span></span><br><span class="line">        System.out.println(<span class="string">"CharacterEncodingFilter执行后...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//销毁：web服务器关闭的时候，过滤会销毁</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"CharacterEncodingFilter销毁"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>什么是跨域？</p><ul><li>比如：从 <a href="http://www.baidu.com" target="_blank" rel="external nofollow noopener noreferrer">http://www.baidu.com</a> 访问到 <a href="http://www.baidu.com/inedx.html，这种情况不会跨域，因为协议，域名，端口号相同；" target="_blank" rel="external nofollow noopener noreferrer">http://www.baidu.com/inedx.html，这种情况不会跨域，因为协议，域名，端口号相同；</a></li><li>从 <a href="http://www.baidu.com" target="_blank" rel="external nofollow noopener noreferrer">http://www.baidu.com</a> 访问到 <a href="https://www.baidu.com/inedx.html，这种情况会跨域，因为协议不同；" target="_blank" rel="external nofollow noopener noreferrer">https://www.baidu.com/inedx.html，这种情况会跨域，因为协议不同；</a></li><li>从 <a href="http://www.baidu.com" target="_blank" rel="external nofollow noopener noreferrer">http://www.baidu.com</a> 访问到 <a href="http://www.zhihu.com，这种情况会跨域，因为域名不同；" target="_blank" rel="external nofollow noopener noreferrer">http://www.zhihu.com，这种情况会跨域，因为域名不同；</a></li><li>从 <a href="http://www.baidu.com" target="_blank" rel="external nofollow noopener noreferrer">http://www.baidu.com</a> 访问到 <a href="http://www.zhihu.com，这种情况会跨域，因为域名不同；" target="_blank" rel="external nofollow noopener noreferrer">http://www.zhihu.com，这种情况会跨域，因为域名不同；</a></li><li>从 <a href="http://aaa.baidu.com" target="_blank" rel="external nofollow noopener noreferrer">http://aaa.baidu.com</a> 访问到 <a href="http://bbb.baidu.com，这种情况会跨域，因为子域名不同（aaa" target="_blank" rel="external nofollow noopener noreferrer">http://bbb.baidu.com，这种情况会跨域，因为子域名不同（aaa</a>. 和 bbb.）；</li><li>从 <a href="http://www.baidu.com:8080" target="_blank" rel="external nofollow noopener noreferrer">http://www.baidu.com:8080</a> 访问到 <a href="http://www.baidu.com:4000，这种情况会跨域，因为端口号不同；" rel="external nofollow noopener noreferrer" target="_blank">http://www.baidu.com:4000，这种情况会跨域，因为端口号不同；</a></li></ul><p>浏览器是不允许我们跨域的。</p><p>跨域会发送什么问题：</p><ul><li>无法读取非同源网页的Cookie</li><li>无法接触非同源网页的 DOM</li><li>无法向非同源地址发送 AJAX 请求</li></ul><p><a href="https://blog.csdn.net/qq_38128179/article/details/84956552" target="_blank" rel="external nofollow noopener noreferrer">详细请看这</a>，<a href="https://segmentfault.com/a/1190000015597029" target="_blank" rel="external nofollow noopener noreferrer">这一篇还讲到了没有同源策略限制的危险场景</a></p><p>除了过滤器，还有拦截器Interceptor，区别：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">执行顺序：Filter过滤前处理 --&gt; Interceptor拦截前处理 --&gt; 处理 --&gt; Interceptor拦截后处理 --&gt; Filter过滤后处理</span><br></pre></td></tr></table></figure><ul><li>Interceptor定义在org.springframework.web.servlet，Filter定义在javax.servlet</li></ul><p><a href="https://blog.csdn.net/yb546822612/article/details/102950040" target="_blank" rel="external nofollow noopener noreferrer">关于Fileter和Interceptor，详细看这</a></p><h2 id="9-监听器"><a href="#9-监听器" class="headerlink" title="9 监听器"></a>9 监听器</h2><p>顾名思义，监听事件，监听浏览器点击，了解就好，<strong>基本很少用，因为过滤器可以实现监听器的功能</strong>。</p><p>使用HttpSessionListener 接口来实现</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//统计网站在线人数 ： 统计session</span></span><br><span class="line"><span class="meta">@WebListener</span>(value = <span class="string">"OnlineCountListener"</span>) <span class="comment">// 注册进去才生效</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OnlineCountListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span> </span>&#123;</span><br><span class="line">    <span class="comment">//创建session监听： 看你的一举一动</span></span><br><span class="line">    <span class="comment">//一旦创建Session就会触发一次这个事件！</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent se)</span> </span>&#123;</span><br><span class="line">        ServletContext ctx = se.getSession().getServletContext();</span><br><span class="line">        System.out.println(se.getSession().getId());</span><br><span class="line">        Integer onlineCount = (Integer) ctx.getAttribute(<span class="string">"OnlineCount"</span>);</span><br><span class="line">        <span class="keyword">if</span> (onlineCount==<span class="keyword">null</span>)&#123;</span><br><span class="line">        onlineCount = <span class="keyword">new</span> Integer(<span class="number">1</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> count = onlineCount.intValue();</span><br><span class="line">        onlineCount = <span class="keyword">new</span> Integer(count+<span class="number">1</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        ctx.setAttribute(<span class="string">"OnlineCount"</span>,onlineCount);</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="comment">//销毁session监听</span></span><br><span class="line">    <span class="comment">//一旦销毁Session就会触发一次这个事件！</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestroyed</span><span class="params">(HttpSessionEvent se)</span> </span>&#123;</span><br><span class="line">        ServletContext ctx = se.getSession().getServletContext();</span><br><span class="line">        Integer onlineCount = (Integer) ctx.getAttribute(<span class="string">"OnlineCount"</span>);</span><br><span class="line">        <span class="keyword">if</span> (onlineCount==<span class="keyword">null</span>)&#123;</span><br><span class="line">        onlineCount = <span class="keyword">new</span> Integer(<span class="number">0</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> count = onlineCount.intValue();</span><br><span class="line">        onlineCount = <span class="keyword">new</span> Integer(count-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        ctx.setAttribute(<span class="string">"OnlineCount"</span>,onlineCount);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="10-JDBC"><a href="#10-JDBC" class="headerlink" title="10. JDBC"></a>10. JDBC</h2><p>JDBC：Java连接数据库！</p><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203926722.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>JDBC 固定步骤：</p><ol><li>加载驱动</li><li>连接数据库,代表数据库</li><li>向数据库发送SQL的对象Statement : CRUD</li><li>编写SQL （根据业务，不同的SQL）</li><li>执行SQL</li><li>关闭连接</li></ol><p>需要的jar包：</p><ul><li>java.sql</li><li>javax.sql</li><li>mysql-conneter-java… 连接驱动（必须要导入）</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mysql的驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>示例：查询</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/15 17:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JDBCTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// 配置信息</span></span><br><span class="line">        <span class="comment">// useUnicode=true&amp;characterEncoding=utf-8 解决中文乱码</span></span><br><span class="line">        <span class="comment">// 对于mysql8版本还得加个时区</span></span><br><span class="line">        String url = <span class="string">"jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;&amp;characterEncoding=utf-8"</span>;</span><br><span class="line">        String user = <span class="string">"root"</span>;</span><br><span class="line">        String password = <span class="string">"123456"</span>;</span><br><span class="line">        <span class="comment">// 1. 加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.连接数据库， Connection代表数据库</span></span><br><span class="line">        Connection connection = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.向数据库发送SQL的对象Statement</span></span><br><span class="line">        Statement statement = connection.createStatement();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.编写SQL</span></span><br><span class="line">        String sql = <span class="string">"select * from user"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.执行SQL</span></span><br><span class="line">        <span class="comment">// boolean execute = statement.execute(sql); // 效率低，可以执行任何SQL语句</span></span><br><span class="line">        <span class="comment">// 返回一个结果集</span></span><br><span class="line">        ResultSet resultSet = statement.executeQuery(sql); <span class="comment">// 专门执行查询的</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(resultSet.next()) &#123;</span><br><span class="line">            System.out.println(<span class="string">"id:"</span> + resultSet.getObject(<span class="string">"id"</span>));</span><br><span class="line">            System.out.println(<span class="string">"name:"</span> + resultSet.getObject(<span class="string">"name"</span>));</span><br><span class="line">            System.out.println(<span class="string">"password:"</span> + resultSet.getObject(<span class="string">"password"</span>));</span><br><span class="line">            System.out.println(<span class="string">"email:"</span> + resultSet.getObject(<span class="string">"email"</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.关闭连接，释放资源（原则：先开后关）</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改：改变第4，5步</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4.编写SQL</span></span><br><span class="line"></span><br><span class="line">  String sql = <span class="string">"insert into user(id, name, password, email) values(5, '周', '123456', 'chaste@163.com')"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5.执行SQL</span></span><br><span class="line">  <span class="comment">// 返回一个结果集</span></span><br><span class="line">  statement.executeUpdate(sql);<span class="comment">// 专门执行修改，删除，插入</span></span><br></pre></td></tr></table></figure><p>预编译：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> flunggg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/7/15 17:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: chaste86@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JDBCTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// 配置信息</span></span><br><span class="line">        <span class="comment">// useUnicode=true&amp;characterEncoding=utf-8 解决中文乱码</span></span><br><span class="line">        String url = <span class="string">"jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;&amp;characterEncoding=utf-8"</span>;</span><br><span class="line">        String user = <span class="string">"root"</span>;</span><br><span class="line">        String password = <span class="string">"123456"</span>;</span><br><span class="line">        <span class="comment">// 1. 加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.连接数据库， Connection代表数据库</span></span><br><span class="line">        Connection connection = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.编写SQL</span></span><br><span class="line"></span><br><span class="line">        String sql = <span class="string">"insert into user(id, name, password, email) values(null, ?, ?, ?)"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.向数据库拿到预编译</span></span><br><span class="line">        PreparedStatement preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">        preparedStatement.setString(<span class="number">1</span>, <span class="string">"小明"</span>);</span><br><span class="line">        preparedStatement.setString(<span class="number">2</span>, <span class="string">"098978676767"</span>);</span><br><span class="line">        preparedStatement.setString(<span class="number">3</span>, <span class="string">"123456@qq.com"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.执行SQL</span></span><br><span class="line">        preparedStatement.execute();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.关闭连接，释放资源（原则：先开后关）</span></span><br><span class="line">        preparedStatement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>还有预编译查询，只需要该第三和第4步。</p><p>预编译（PreparedStatement）和普通（Statement）的区别：</p><ul><li><strong>PreparedStatement的执行效率快</strong>，在数据库处理SQL语句时，都会有一个预编译的过程，也就是把一些格式固定的SQL编译后，放入数据库缓冲池中，当下次执行相同的SQL语句就不需要预编译，直接解析执行（如果带有参数，传参就行）。而使用Statement对象时，每次执行一个SQL命令时，都会对它进行解析和编译。</li><li><strong>提高可读性和易维护性</strong>。虽然可能比Statement多写几行代码，但是看起来更加清晰。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Statement的sql得这样写</span></span><br><span class="line">String sql = <span class="string">"select * from user where name = '"</span> + userName + <span class="string">"' and password = '"</span> + password + <span class="string">"'"</span>;</span><br><span class="line"><span class="comment">// PreparedStatement的sql也可以像上面一样，但也提供另外的方法</span></span><br><span class="line">String sql = <span class="string">"select * from user where name = ? and password = ?"</span>;</span><br><span class="line"><span class="comment">// 然后只需要</span></span><br><span class="line">preparedStatement.setString(<span class="number">1</span>, userName);</span><br><span class="line">preparedStatement.setString(<span class="number">2</span>, password);</span><br></pre></td></tr></table></figure><ul><li><strong>安全问题，防止恶意SQL注入</strong>：恶意的SQL语句，比如：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"select * from user where name = '"</span> + userName + <span class="string">"' and password = '"</span> + password + <span class="string">"'"</span>;</span><br></pre></td></tr></table></figure><p>假设密码被传入：userName = “小明”, password = “‘ or ‘1’ = ‘1’”，sql语句变这样：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"select * from user where name = '小明' and password = '' or '1' = '1'"</span>;</span><br></pre></td></tr></table></figure><p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/20200715203910285.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTgwMDg4NA==,size_16,color_FFFFFF,t_70#pic_center"></p><p>这样数据库中的全部数据就会被获取。如果表的数据比较多，一下子全部拿出来可能会挤爆内存。</p><p>而使用了：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">      <span class="comment">// 3.编写SQL</span></span><br><span class="line">      String userName = <span class="string">"小明"</span>;</span><br><span class="line"><span class="comment">// 因为有or 1=1，所以无论条件满不满足都是恒成立</span></span><br><span class="line">      String userPassword = <span class="string">"' or '1' = '1'"</span>;</span><br><span class="line">      String sql = <span class="string">"select * from user where name = ? and password = ?"</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 4.向数据库拿到预编译</span></span><br><span class="line">      PreparedStatement preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">      preparedStatement.setString(<span class="number">1</span>, userName);</span><br><span class="line">      preparedStatement.setString(<span class="number">2</span>, userPssword);</span><br></pre></td></tr></table></figure><p>不会输出结果。</p><p>使用Statement会把该表的全部数据全输出。</p><p>参考：</p><p><a href="https://www.bilibili.com/video/BV12J411M7Sj?p=28" target="_blank" rel="external nofollow noopener noreferrer">B站狂神</a><a href="https://www.bilibili.com/video/BV12J411M7Sj?p=28" target="_blank" rel="external nofollow noopener noreferrer">https://www.bilibili.com/video/BV12J411M7Sj?p=28</a>)</p></div><div><div class="my_post_copyright"><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script><script src="/js/sweetalert.min.js"></script><p><span>文章作者:</span><a href="/" title="访问 flunggg 的个人博客">flunggg</a></p><p><span>发布时间:</span>2020年07月15日 - 20:07</p><p><span>原始链接:</span><a href="/archives/f8e04b04.html" title="JavaWeb总结">https://flunggg.cn/archives/f8e04b04.html</a><span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://flunggg.cn/archives/f8e04b04.html" aria-label="复制成功！"></i></span></p><p><span>许可协议:</span> 转载请保留原文链接及作者。</p></div><script>var clipboard=new Clipboard(".fa-clipboard");$(".fa-clipboard").click(function(){clipboard.on("success",function(){swal({title:"",text:"复制成功",icon:"success",showConfirmButton:!0})})})</script></div><div class="reward-container"><div></div> <button disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';"> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="/images/wechatpay.jpg" alt="flunggg 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="/images/alipay.jpg" alt="flunggg 支付宝"><p>支付宝</p></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/java-session-cookie/" rel="tag"><i class="fa fa-tag"></i> java session cookie</a></div><div class="post-widgets"><div class="wp_rating"><div id="wpac-rating"></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/archives/5d6c5d62.html" rel="prev" title="数据结构：数组"><i class="fa fa-chevron-left"></i> 数据结构：数组</a></div><div class="post-nav-item"></div></div></footer></article></div></div><div class="comments" id="comments"></div></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-JavaWeb-入门"><span class="nav-text">1. JavaWeb 入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-Web应用程序"><span class="nav-text">1.1 Web应用程序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-Web服务器"><span class="nav-text">1.2 Web服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-Tomcat"><span class="nav-text">1.3 Tomcat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-HTTP"><span class="nav-text">1.4 HTTP</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-什么是Servlet"><span class="nav-text">2. 什么是Servlet</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-使用Servlet"><span class="nav-text">2.1 使用Servlet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-Servlet原理"><span class="nav-text">2.2 Servlet原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-ServletContext"><span class="nav-text">2.3 ServletContext</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-1-共享数据"><span class="nav-text">2.3.1 共享数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-2-获得初始化参数"><span class="nav-text">2.3.2 获得初始化参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-3-请求转发"><span class="nav-text">2.3.3 请求转发</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-4-读取资源文件"><span class="nav-text">2.3.4 读取资源文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-HttpServletResponse"><span class="nav-text">2.4 HttpServletResponse</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-1-下载文件（了解）"><span class="nav-text">2.4.1 下载文件（了解）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-2-重定向"><span class="nav-text">2.4.2 重定向</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-HttpServletRequest"><span class="nav-text">2.5 HttpServletRequest</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Cookie，Session"><span class="nav-text">3. Cookie，Session</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-会话"><span class="nav-text">3.1 会话</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-保存会话的两种技术"><span class="nav-text">3.2 保存会话的两种技术</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-Cookie"><span class="nav-text">3.3 Cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-Session（重要）"><span class="nav-text">3.4 Session（重要）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-JSP（了解）"><span class="nav-text">4. JSP（了解）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-什么是JSP？"><span class="nav-text">4.1 什么是JSP？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2、JSP原理"><span class="nav-text">4.2、JSP原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-域对象"><span class="nav-text">5. 域对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-ServletContext"><span class="nav-text">5.1 ServletContext</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-ServletRequest"><span class="nav-text">5.2 ServletRequest</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-Session"><span class="nav-text">5.3 Session</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-PageContext（了解）"><span class="nav-text">5.4 PageContext（了解）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-JavaBean"><span class="nav-text">6. JavaBean</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-MVC三层架构"><span class="nav-text">7. MVC三层架构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-Filter"><span class="nav-text">8. Filter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-监听器"><span class="nav-text">9 监听器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-JDBC"><span class="nav-text">10. JDBC</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="https://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="flunggg" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">flunggg</p><div class="site-description" itemprop="description">做自己喜欢的事</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">18</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/magicflung" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;magicflung" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://blog.csdn.net/weixin_41800884" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_41800884" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-maxcdn"></i> CSDN</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i> RSS</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">flunggg</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">50k</span></div><div id="days"></div><script language="javascript">function show_date_time(){window.setTimeout("show_date_time()",1e3),BirthDay=new Date("11/29/2019 20:00:00"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),e_hrsold=24*(e_daysold-daysold),hrsold=setzero(Math.floor(e_hrsold)),e_minsold=60*(e_hrsold-hrsold),minsold=setzero(Math.floor(60*(e_hrsold-hrsold))),seconds=setzero(Math.floor(60*(e_minsold-minsold))),document.getElementById("days").innerHTML="已运行"+daysold+"天"+hrsold+"时"+minsold+"分"+seconds+"秒"}function setzero(e){return e<10&&(e="0"+e),e}show_date_time()</script> <span id="busuanzi_container_site_pv">本站总访问量<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>次</span><div class="busuanzi-count"><script async src="//cdn.busuanzi.ibruce.info/cdn/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script>CONFIG.page.isPost&&(wpac_init=window.wpac_init||[],wpac_init.push({widget:"Rating",id:22805,el:"wpac-rating",color:"fc6423"}),function(){if(!("WIDGETPACK_LOADED"in window)){WIDGETPACK_LOADED=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//embed.widgetpack.com/widget.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t.nextSibling)}}())</script><script src="/js/local-search.js"></script><script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'ogeebUOA3cE6iHMOmWC9IdvV-gzGzoHsz',
    appKey: 'U1fUosFMtzuRYccYpt5bEDhv',
    placeholder: "Just go go",
    avatar: 'monsterid',
    meta: guest,
    pageSize: '10' || 10,
	avatar_cdn:'https://www.gravatar.com/avatar/',
    visitor: true,
    lang: '' || 'zh-cn',
    path: location.pathname,
    recordIP: false,
    serverURLs: ''
  });
}, window.Valine);
</script></body><script type="text/javascript" src="/js/src/clicklove.js"></script><script type="text/javascript" src="/js/src/FunnyTitle.js"></script></html>